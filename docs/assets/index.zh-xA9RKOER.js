import{j as i}from"./index-FZiEhLxM.js";const n={title:"一文彻底搞懂 MCP App：从协议规范到实战开发",description:"深入解析 MCP App 架构设计、协议规范、SDK API 和最佳实践，帮助开发者全面理解如何为 AI Agent 构建交互式 UI",date:"2026-01-28",tags:["MCP","AI Agent","UI","SDK","Protocol"],lang:"zh",author:"use-mcp.dev"};function l(h){const s={a:"a",code:"code",figure:"figure",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...h.components};return i.jsxs(i.Fragment,{children:[i.jsx(s.h2,{children:"太长不看"}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"MCP App 是什么"}),"：运行在 MCP 宿主 iframe 中的交互式 UI 组件，让 AI Agent 能够返回可视化界面而非纯文本"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"核心公式"}),"：MCP App = Tool + UI Resource，通过 ",i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"_meta.ui.resourceUri"})})})})," 将工具与 UI 资源关联"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"多层安全"}),"：iframe 沙箱隔离 + CSP 内容安全策略 + 权限声明 + 用户同意机制"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"广泛支持"}),"：Claude、ChatGPT、VS Code、Goose 等主流客户端已支持，首次实现跨平台 UI 体验"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"生态意义"}),'：打破"纯文本响应"范式，推动 AI Agent 生态从工具调用升级为完整应用平台']}),`
`]}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{children:"引言"}),`
`,i.jsxs(s.p,{children:["2026 年 1 月 26 日，MCP 官方正式发布了 MCP Apps 1.0 稳定版。这是 MCP 协议的",i.jsx(s.strong,{children:"第一个官方扩展"}),'，标志着 AI Agent 生态从"工具调用"正式迈入"应用平台"时代。']}),`
`,i.jsxs(s.p,{children:["想象这样一个场景：你让 AI 帮你分析销售数据，传统的 MCP 工具会返回一堆 JSON 数据或文本表格，你需要复制到 Excel 或其他工具中才能可视化。而有了 MCP App，AI 可以直接在对话中渲染一个",i.jsx(s.strong,{children:"交互式仪表盘"}),"——你可以悬停查看详情、点击筛选数据、拖拽调整图表，所有操作都在对话窗口内完成。"]}),`
`,i.jsx(s.p,{children:"这不是科幻，这是 MCP App 正在做的事情。"}),`
`,i.jsx(s.p,{children:"本文将带你深入理解 MCP App 的方方面面：从诞生背景到架构设计，从协议规范到 SDK API，从安全模型到实战开发，一篇文章帮你彻底搞懂 MCP App。"}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{children:"第一部分：背景与动机"}),`
`,i.jsx(s.h3,{children:"1.1 MCP 协议的局限性"}),`
`,i.jsx(s.p,{children:"Model Context Protocol (MCP) 在设计之初，主要解决的是 AI 模型与外部数据/工具的连接问题。MCP 定义了三种核心原语："}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"Tools（工具）"}),"：让模型能够执行操作"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"Resources（资源）"}),"：让模型能够读取数据"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"Prompts（提示词）"}),"：让模型能够使用预设的提示模板"]}),`
`]}),`
`,i.jsxs(s.p,{children:["然而，MCP 原本只支持",i.jsx(s.strong,{children:"文本和结构化数据"}),"的交换。当工具需要可视化展示或复杂用户输入时，宿主必须自行构建渲染逻辑。这导致了一个尴尬的局面："]}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"text","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"text","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:'用户: "帮我生成一个销售数据饼图"'})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:`Agent: "好的，这是数据：{sales: [{region: '华东', value: 3500}, ...]}，`})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:'        您可以复制到 Excel 或 ECharts 中生成图表"'})})]})})}),`
`,i.jsx(s.p,{children:"开发者被迫创建各种 ad-hoc 解决方案，导致生态碎片化——每个宿主有自己的 UI 扩展方式，互不兼容。"}),`
`,i.jsx(s.h3,{children:"1.2 社区需求的演进"}),`
`,i.jsx(s.p,{children:'社区对"UI over MCP"的需求早已显现：'}),`
`,i.jsxs(s.p,{children:[i.jsx(s.strong,{children:"Working Group Issue #35"}),'：2025 年中，社区在 MCP 工作组提出了 "UI Component Integration in MCP Responses" RFC，讨论如何在 MCP 响应中集成 UI 组件。']}),`
`,i.jsxs(s.p,{children:[i.jsx(s.strong,{children:"MCP-UI 社区项目"}),"：由 Ido Salomon 和 Liad Yosef 创建的 ",i.jsx(s.a,{href:"https://mcpui.dev/",children:"MCP-UI"})," 项目，在官方规范出台前就已积累了 4.2k+ stars，成为事实上的先行探索者。"]}),`
`,i.jsx(s.p,{children:"社区的主要诉求包括："}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsx(s.li,{children:"交互式表单、按钮、多步工作流"}),`
`,i.jsx(s.li,{children:"实时数据可视化（图表、仪表盘）"}),`
`,i.jsx(s.li,{children:"配置向导（多选项、条件依赖）"}),`
`,i.jsx(s.li,{children:"富媒体查看器（PDF、3D 模型、视频）"}),`
`]}),`
`,i.jsx(s.h3,{children:"1.3 Anthropic 与 OpenAI 的合作"}),`
`,i.jsx(s.p,{children:"2025 年 11 月，MCP 团队发布了 MCP Apps 的首次公开预览，整合了两个重要的外部贡献："}),`
`,i.jsxs(s.ol,{children:[`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"MCP-UI 社区项目"}),"：提供了 UI 资源的基础模式"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"OpenAI Apps SDK"}),"：ChatGPT 的 Widget 机制为协议设计提供了参考"]}),`
`]}),`
`,i.jsxs(s.p,{children:["经过数月的迭代，2026 年 1 月 26 日，MCP Apps 1.0 正式发布。这是一个罕见的",i.jsx(s.strong,{children:"跨公司协作"}),"案例——Anthropic、OpenAI、Block、Microsoft 等公司共同参与了规范的制定和实现。"]}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{children:"第二部分：核心概念与架构"}),`
`,i.jsx(s.h3,{children:"2.1 什么是 MCP App"}),`
`,i.jsxs(s.p,{children:[i.jsx(s.strong,{children:"官方定义"}),"：MCP App 是运行在 MCP 宿主 iframe 中的交互式 UI 组件。"]}),`
`,i.jsxs(s.p,{children:[i.jsx(s.strong,{children:"核心公式"}),"："]}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"text","data-theme":"github-dark-default github-light-default",children:i.jsx(s.code,{"data-language":"text","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"MCP App = Tool + UI Resource"})})})})}),`
`,i.jsx(s.p,{children:"一个 MCP App 由两部分组成："}),`
`,i.jsxs(s.ol,{children:[`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"Tool（工具）"}),"：声明了 ",i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"_meta.ui.resourceUri"})})})})," 字段，指向 UI 资源"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"UI Resource（UI 资源）"}),"：包含 HTML/CSS/JS 的可交互界面"]}),`
`]}),`
`,i.jsx(s.p,{children:"与传统 Web 应用的关键区别："}),`
`,i.jsxs(s.table,{children:[i.jsx(s.thead,{children:i.jsxs(s.tr,{children:[i.jsx(s.th,{children:"特性"}),i.jsx(s.th,{children:"传统 Web 应用"}),i.jsx(s.th,{children:"MCP App"})]})}),i.jsxs(s.tbody,{children:[i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"上下文"})}),i.jsx(s.td,{children:"独立页面，跳出对话"}),i.jsx(s.td,{children:"嵌入对话流，保持上下文"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"数据流"})}),i.jsx(s.td,{children:"需自建 API、认证"}),i.jsx(s.td,{children:"可直接调用 MCP 服务器工具"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"集成能力"})}),i.jsx(s.td,{children:"需单独实现各种集成"}),i.jsx(s.td,{children:"可委托宿主调用已连接的能力"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"安全隔离"})}),i.jsx(s.td,{children:"完全信任或完全隔离"}),i.jsx(s.td,{children:"iframe 沙箱 + CSP 精细控制"})]})]})]}),`
`,i.jsx(s.h3,{children:"2.2 三层架构"}),`
`,i.jsx(s.p,{children:"MCP App 的架构分为三层："}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"text","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"text","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"┌─────────────────────────────────────────────────────┐"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"│                    MCP Server                        │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"│  - registerAppTool(): 注册带 UI 的工具                │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"│  - registerAppResource(): 注册 UI 资源               │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"│  - 处理工具调用，返回结构化数据                        │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"└───────────────────────┬─────────────────────────────┘"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"                        │ MCP Protocol (JSON-RPC)"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"                        ▼"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"┌─────────────────────────────────────────────────────┐"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"│                    Host (AppBridge)                  │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"│  - 连接真实 MCP 服务器                               │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"│  - 管理 iframe 沙箱                                  │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"│  - 转发请求/响应                                     │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"│  - 发送工具输入/结果给 View                          │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"└───────────────────────┬─────────────────────────────┘"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"                        │ postMessage (JSON-RPC)"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"                        ▼"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"┌─────────────────────────────────────────────────────┐"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"│                    View (App 类)                     │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"│  - 运行在 iframe 中                                  │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"│  - 接收工具输入和结果                                │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"│  - 可调用服务器工具                                  │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"│  - 可发送消息到对话                                  │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"└─────────────────────────────────────────────────────┘"})})]})})}),`
`,i.jsxs(s.p,{children:[i.jsx(s.strong,{children:"三层职责"}),"："]}),`
`,i.jsxs(s.ol,{children:[`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"Server 层"}),"：MCP 服务器，负责注册工具、处理业务逻辑、返回数据"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"Host 层"}),"：宿主应用（如 Claude Desktop），负责连接服务器、管理沙箱、转发消息"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"View 层"}),"：UI 组件，运行在 iframe 中，负责渲染界面、处理用户交互"]}),`
`]}),`
`,i.jsx(s.h3,{children:"2.3 生命周期"}),`
`,i.jsx(s.p,{children:"一个 MCP App 的完整生命周期如下："}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"text","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"text","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"1. Discovery（发现）"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"   └── Host 获取工具列表，识别带 _meta.ui.resourceUri 的工具"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"2. Initialize（初始化）"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"   └── Host 渲染 iframe"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"   └── View 发送 ui/initialize 握手请求"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"   └── Host 返回上下文和能力信息"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"3. Data Delivery（数据交付）"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"   └── Host 发送 tool-input 通知（工具输入参数）"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"   └── Host 发送 tool-result 通知（工具执行结果）"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"4. Interactive（交互阶段）"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"   └── 用户与 View 交互"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"   └── View 可调用服务器工具"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"   └── View 可更新模型上下文"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"5. Teardown（清理）"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"   └── Host 发送 ui/resource-teardown"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"   └── View 清理资源、断开连接"})})]})})}),`
`,i.jsx(s.h3,{children:"2.4 URI 方案与 MIME 类型"}),`
`,i.jsxs(s.p,{children:[i.jsx(s.strong,{children:"UI Resource URI"}),"："]}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"text","data-theme":"github-dark-default github-light-default",children:i.jsx(s.code,{"data-language":"text","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"ui://server-name/resource-path.html"})})})})}),`
`,i.jsxs(s.p,{children:[i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"ui://"})})})})," 是 MCP App 专用的 URI 方案，告诉宿主这是一个需要在 iframe 中渲染的 UI 资源。"]}),`
`,i.jsxs(s.p,{children:[i.jsx(s.strong,{children:"MIME Type"}),"："]}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"text","data-theme":"github-dark-default github-light-default",children:i.jsx(s.code,{"data-language":"text","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"text/html;profile=mcp-app"})})})})}),`
`,i.jsxs(s.p,{children:[i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"profile=mcp-app"})})})})," 参数传达了额外的语义约束——这不是普通的 HTML 页面，而是一个符合 MCP App 协议的交互式组件。"]}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{children:"第三部分：协议规范详解"}),`
`,i.jsx(s.h3,{children:"3.1 协议版本"}),`
`,i.jsxs(s.table,{children:[i.jsx(s.thead,{children:i.jsxs(s.tr,{children:[i.jsx(s.th,{children:"版本"}),i.jsx(s.th,{children:"状态"}),i.jsx(s.th,{children:"链接"})]})}),i.jsxs(s.tbody,{children:[i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"2026-01-26"})}),i.jsx(s.td,{children:"Stable（稳定）"}),i.jsx(s.td,{children:i.jsx(s.a,{href:"https://github.com/modelcontextprotocol/ext-apps/blob/main/specification/2026-01-26/apps.mdx",children:"specification/2026-01-26/apps.mdx"})})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"draft"}),i.jsx(s.td,{children:"Development"}),i.jsx(s.td,{children:i.jsx(s.a,{href:"https://github.com/modelcontextprotocol/ext-apps/blob/main/specification/draft/apps.mdx",children:"specification/draft/apps.mdx"})})]})]})]}),`
`,i.jsx(s.h3,{children:"3.2 工具元数据 (Tool Metadata)"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"interface"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiToolMeta"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  ui"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"    resourceUri"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" string"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"; "}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 指向 UI 资源的 URI"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"    visibility"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" ("}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'model'"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" |"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" 'app'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")[]; "}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 可见性范围"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  };"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"}"})})]})})}),`
`,i.jsxs(s.p,{children:[i.jsx(s.strong,{children:"visibility 字段详解"}),"："]}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsxs(s.li,{children:[i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:'visibility: ["model"]'})})})})," — 仅 LLM 可调用（默认）"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:'visibility: ["app"]'})})})})," — 仅 View 可调用，LLM 不可见"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:'visibility: ["model", "app"]'})})})})," — 两者均可调用"]}),`
`]}),`
`,i.jsx(s.p,{children:'这个设计允许你创建"内部工具"——只有 UI 可以调用的辅助工具，对 LLM 隐藏。'}),`
`,i.jsx(s.h3,{children:"3.3 资源元数据 (Resource Metadata)"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"interface"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiResourceMeta"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  ui"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"    csp"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiResourceCsp"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"; "}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 内容安全策略"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"    permissions"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiResourcePermissions"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"; "}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 设备权限"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"    domain"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" string"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"; "}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 专用沙箱来源"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"    prefersBorder"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" boolean"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"; "}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 是否显示边框"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  };"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"}"})})]})})}),`
`,i.jsx(s.h3,{children:"3.4 内容安全策略 (CSP)"}),`
`,i.jsx(s.p,{children:"CSP 是 MCP App 安全模型的核心组件："}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"interface"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiResourceCsp"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  connectDomains"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" string"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"[]; "}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 允许 fetch/XHR/WebSocket 连接的域"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  resourceDomains"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" string"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"[]; "}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 允许加载静态资源的域（脚本、样式、图片）"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  frameDomains"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" string"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"[]; "}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 允许嵌套 iframe 的域"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  baseUriDomains"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" string"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"[]; "}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// base-uri 指令"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"}"})})]})})}),`
`,i.jsxs(s.p,{children:[i.jsx(s.strong,{children:"默认行为"}),"：Restrictive by Default（默认拒绝）"]}),`
`,i.jsx(s.p,{children:"如果不声明任何 CSP 域，App 将无法："}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsx(s.li,{children:"发起任何外部网络请求"}),`
`,i.jsx(s.li,{children:"加载任何外部脚本或样式"}),`
`,i.jsx(s.li,{children:"嵌入任何外部 iframe"}),`
`]}),`
`,i.jsxs(s.p,{children:["必须",i.jsx(s.strong,{children:"显式声明"}),"需要访问的外部域。"]}),`
`,i.jsx(s.h3,{children:"3.5 设备权限"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"interface"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiResourcePermissions"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  camera"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {}; "}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 摄像头"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  microphone"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {}; "}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 麦克风"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  geolocation"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {}; "}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 地理位置"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  clipboardWrite"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {}; "}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 剪贴板写入"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"}"})})]})})}),`
`,i.jsxs(s.p,{children:["这些权限映射到 iframe 的 ",i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"allow"})})})})," 属性，宿主会据此构建沙箱。"]}),`
`,i.jsx(s.h3,{children:"3.6 宿主上下文 (Host Context)"}),`
`,i.jsx(s.p,{children:"宿主在初始化时会向 View 发送上下文信息："}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"interface"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiHostContext"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  theme"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" 'light'"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" |"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" 'dark'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  locale"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" string"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  timezone"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" string"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  displayMode"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" 'inline'"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" |"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" 'fullscreen'"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" |"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" 'pip'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  safeAreaInsets"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"top"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" number"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"; "}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"right"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" number"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"; "}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"bottom"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" number"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"; "}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"left"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" number"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" };"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  containerSize"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"width"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" number"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"; "}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"height"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" number"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" };"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  platform"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" 'web'"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" |"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" 'desktop'"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" |"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" 'mobile'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  capabilities"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiHostCapabilities"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  styles"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiHostStyles"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"; "}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 30+ CSS 变量"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"}"})})]})})}),`
`,i.jsx(s.h3,{children:"3.7 样式变量系统"}),`
`,i.jsx(s.p,{children:"MCP App 定义了一套完整的 CSS 变量系统，让 App 能够适配宿主主题："}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"css","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"css","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"/* 背景色 */"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"--color-background-primary"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"--color-background-secondary"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"--color-background-tertiary"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"/* 文本色 */"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"--color-text-primary"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"--color-text-secondary"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"--color-text-tertiary"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"--color-text-quaternary"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"/* 强调色 */"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"--color-accent-primary"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"--color-accent-secondary"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"/* 边框色 */"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"--color-border-primary"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"--color-border-secondary"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"--color-border-tertiary"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"/* 字体 */"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"--font-sans"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"--font-mono"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"/* 字重 */"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"--font-weight-normal"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"--font-weight-medium"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"--font-weight-semibold"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"--font-weight-bold"})})]})})}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{children:"第四部分：SDK 与 API"}),`
`,i.jsx(s.h3,{children:"4.1 NPM 包结构"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 主 SDK - View 端"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" { App, PostMessageTransport } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" '@modelcontextprotocol/ext-apps'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// React 集成"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" { useApp, useHostStyleVariables, useAutoResize } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" '@modelcontextprotocol/ext-apps/react'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// Host 端"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  AppBridge,"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  getToolUiResourceUri,"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  buildAllowAttribute,"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"} "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" '@modelcontextprotocol/ext-apps/app-bridge'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// Server 助手"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  registerAppTool,"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  registerAppResource,"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  RESOURCE_MIME_TYPE,"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"} "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" '@modelcontextprotocol/ext-apps/server'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]})]})})}),`
`,i.jsx(s.h3,{children:"4.2 App 类 API (View 端)"}),`
`,i.jsxs(s.p,{children:[i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"App"})})})})," 类是 View 端的核心，提供与宿主通信的完整能力："]}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"class"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" App"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" extends"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" Protocol"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"  // 连接和生命周期"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  connect"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"transport"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" Transport"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" Promise"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"<"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"void"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">;"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  getHostContext"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"()"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiHostContext"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" |"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" undefined"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  close"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"()"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" Promise"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"<"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"void"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">;"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"  // 与服务器交互"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  callServerTool"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"request"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" CallToolRequest"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" Promise"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"<"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"CallToolResult"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">;"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  readServerResource"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"request"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" ReadResourceRequest"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" Promise"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"<"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"ReadResourceResult"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">;"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"  // 与宿主交互"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  sendMessage"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"message"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" Message"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" Promise"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"<{ "}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"isError"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" boolean"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" }>;"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  updateModelContext"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"context"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiUpdateModelContextRequest"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" Promise"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"<"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"void"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">;"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  openLink"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"request"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiOpenLinkRequest"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" Promise"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"<{ "}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"isError"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" boolean"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" }>;"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  requestDisplayMode"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"request"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiRequestDisplayModeRequest"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" Promise"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"<"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"void"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">;"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  sendLog"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"log"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"level"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" string"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"; "}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"data"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" any"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" })"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" Promise"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"<"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"void"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">;"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"  // 生命周期处理器"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  ontoolinput"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" ("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"input"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiToolInputNotification"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:") "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"=>"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" void"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  ontoolresult"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" ("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"result"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiToolResultNotification"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:") "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"=>"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" void"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  ontoolcancelled"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" ("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"params"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"reason"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" string"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" }) "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"=>"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" void"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  onhostcontextchanged"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" ("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"context"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiHostContext"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:") "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"=>"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" void"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  onteardown"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" () "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"=>"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" Promise"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"<"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"any"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">;"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"}"})})]})})}),`
`,i.jsx(s.h3,{children:"4.3 AppBridge 类 API (Host 端)"}),`
`,i.jsxs(s.p,{children:[i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"AppBridge"})})})})," 是宿主端的桥接类，管理与 iframe 中 App 的通信："]}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"class"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" AppBridge"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" extends"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" Protocol"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  connect"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"transport"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" Transport"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" Promise"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"<"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"void"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">;"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"  // 发送工具数据给 View"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  sendToolInput"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"toolInput"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiToolInputNotification"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" Promise"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"<"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"void"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">;"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  sendToolInputPartial"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"toolInputPartial"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiToolInputPartialNotification"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" Promise"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"<"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"void"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">;"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  sendToolResult"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"toolResult"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiToolResultNotification"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" Promise"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"<"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"void"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">;"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  sendToolCancelled"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"toolCancelled"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiToolCancelledNotification"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" Promise"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"<"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"void"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">;"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"  // 宿主上下文管理"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  setHostContext"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"context"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiHostContext"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" Promise"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"<"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"void"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">;"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  updateHostContext"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"context"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" Partial"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"<"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"McpUiHostContext"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">)"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" Promise"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"<"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"void"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">;"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  teardownResource"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"()"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" Promise"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"<"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"void"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">;"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"}"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 辅助函数"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"function"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:" getToolUiResourceUri"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"tool"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" Partial"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"<"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"Tool"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">)"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" string"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" |"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" undefined"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"function"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:" buildAllowAttribute"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"permissions"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiResourcePermissions"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" |"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" undefined"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" string"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]})]})})}),`
`,i.jsx(s.h3,{children:"4.4 Server 助手函数"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"function"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:" registerAppTool"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  server"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpServer"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  name"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" string"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  config"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiAppToolConfig"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  callback"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" ToolCallback"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" RegisteredTool"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"function"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:" registerAppResource"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  server"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpServer"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  name"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" string"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  uri"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" string"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  meta"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" ResourceMetadata"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  callback"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" ReadResourceCallback"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" RegisteredResource"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]})]})})}),`
`,i.jsx(s.h3,{children:"4.5 React Hooks"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 核心 Hook - 管理 App 连接和状态"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"function"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:" useApp"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"options"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" UseAppOptions"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  app"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" App"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" |"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" null"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  toolInput"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiToolInputNotification"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" |"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" null"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  toolResult"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiToolResultNotification"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" |"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" null"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"  hostContext"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiHostContext"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" |"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" undefined"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"};"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 样式同步 - 将宿主 CSS 变量注入到文档"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"function"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:" useHostStyleVariables"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"app"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" App"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" |"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" null"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"initialContext"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiHostContext"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" void"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 主题同步 - 设置 data-theme 属性"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"function"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:" useDocumentTheme"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"app"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" App"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" |"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" null"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"initialContext"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiHostContext"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" void"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 自动调整大小 - 通知宿主 View 尺寸变化"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"function"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:" useAutoResize"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"app"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" App"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" |"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" null"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"autoResize"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" boolean"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" void"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]})]})})}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{children:"第五部分：通信协议详解"}),`
`,i.jsx(s.h3,{children:"5.1 传输层"}),`
`,i.jsxs(s.p,{children:["MCP App 使用 ",i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"PostMessageTransport"})})})}),"，基于 ",i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"window.postMessage"})})})})," 实现 JSON-RPC 2.0 协议。"]}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" transport"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" new"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:" PostMessageTransport"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"({"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  targetOrigin: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'*'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 或指定具体的宿主 origin"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"});"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"await"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" app."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"connect"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"(transport);"})]})]})})}),`
`,i.jsx(s.h3,{children:"5.2 请求类型"}),`
`,i.jsxs(s.table,{children:[i.jsx(s.thead,{children:i.jsxs(s.tr,{children:[i.jsx(s.th,{children:"方法"}),i.jsx(s.th,{children:"方向"}),i.jsx(s.th,{children:"用途"})]})}),i.jsxs(s.tbody,{children:[i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"ui/initialize"})})})})}),i.jsx(s.td,{children:"View → Host"}),i.jsx(s.td,{children:"初始化握手"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"ui/message"})})})})}),i.jsx(s.td,{children:"View → Host"}),i.jsx(s.td,{children:"发送消息到对话"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"ui/update-model-context"})})})})}),i.jsx(s.td,{children:"View → Host"}),i.jsx(s.td,{children:"更新模型上下文"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"ui/open-link"})})})})}),i.jsx(s.td,{children:"View → Host"}),i.jsx(s.td,{children:"打开外部链接"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"ui/request-display-mode"})})})})}),i.jsx(s.td,{children:"View → Host"}),i.jsx(s.td,{children:"请求显示模式"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"ui/resource-teardown"})})})})}),i.jsx(s.td,{children:"Host → View"}),i.jsx(s.td,{children:"资源清理"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"tools/call"})})})})}),i.jsx(s.td,{children:"View → Host"}),i.jsx(s.td,{children:"调用服务器工具"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"tools/list"})})})})}),i.jsx(s.td,{children:"View → Host"}),i.jsx(s.td,{children:"列出可用工具"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"resources/read"})})})})}),i.jsx(s.td,{children:"View → Host"}),i.jsx(s.td,{children:"读取资源"})]})]})]}),`
`,i.jsx(s.h3,{children:"5.3 通知类型"}),`
`,i.jsxs(s.table,{children:[i.jsx(s.thead,{children:i.jsxs(s.tr,{children:[i.jsx(s.th,{children:"方法"}),i.jsx(s.th,{children:"方向"}),i.jsx(s.th,{children:"用途"})]})}),i.jsxs(s.tbody,{children:[i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"ui/notifications/initialized"})})})})}),i.jsx(s.td,{children:"View → Host"}),i.jsx(s.td,{children:"初始化完成"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"ui/notifications/size-changed"})})})})}),i.jsx(s.td,{children:"View → Host"}),i.jsx(s.td,{children:"尺寸变化"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"ui/notifications/tool-input"})})})})}),i.jsx(s.td,{children:"Host → View"}),i.jsx(s.td,{children:"工具输入数据"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"ui/notifications/tool-input/partial"})})})})}),i.jsx(s.td,{children:"Host → View"}),i.jsx(s.td,{children:"流式输入（部分数据）"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"ui/notifications/tool-result"})})})})}),i.jsx(s.td,{children:"Host → View"}),i.jsx(s.td,{children:"工具结果"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"ui/notifications/tool-cancelled"})})})})}),i.jsx(s.td,{children:"Host → View"}),i.jsx(s.td,{children:"工具已取消"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"ui/notifications/host-context-changed"})})})})}),i.jsx(s.td,{children:"Host → View"}),i.jsx(s.td,{children:"宿主上下文变化"})]})]})]}),`
`,i.jsx(s.h3,{children:"5.4 完整通信序列图"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"View                          Host                          Server"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"  │                             │                              │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"  │◄────── render iframe ───────│                              │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"  │                             │                              │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"  │── ui/initialize ──────────►│                              │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"  │◄─ {context, capabilities} ──│                              │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"  │── ui/notifications/init ──►│                              │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"  │                             │                              │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"  │◄─ tool-input notification ──│◄───── tool call ────────────│"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"  │◄─ tool-result notification ─│◄───── tool result ──────────│"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"  │                             │                              │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"  │── tools/call ─────────────►│── tools/call ───────────────►│"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"  │◄─ result ───────────────────│◄─ result ───────────────────│"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"  │                             │                              │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"  │◄─ ui/resource-teardown ─────│                              │"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"  │── acknowledgment ──────────►│                              │"})})]})})}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{children:"第六部分：安全模型"}),`
`,i.jsx(s.h3,{children:"6.1 多层防护"}),`
`,i.jsxs(s.p,{children:["MCP App 采用",i.jsx(s.strong,{children:"纵深防御"}),"策略，包含多层安全机制："]}),`
`,i.jsxs(s.ol,{children:[`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"iframe 沙箱"}),"：所有 UI 内容运行在沙箱 iframe 中"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"预声明模板"}),"：宿主可在执行前审查 HTML 内容"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"可审计消息"}),"：所有 UI-Host 通信基于 JSON-RPC，可记录和审计"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"用户同意"}),"：View 发起的工具调用可要求用户确认"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"CSP 控制"}),"：细粒度的外部域访问控制"]}),`
`]}),`
`,i.jsx(s.h3,{children:"6.2 iframe 沙箱属性"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"function"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:" buildAllowAttribute"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"permissions"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"?:"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" McpUiResourcePermissions"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:":"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" string"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"  const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" allows"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" ["})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"    'allow-scripts'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 允许执行脚本"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"    'allow-forms'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 允许提交表单"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"    'allow-same-origin'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 允许同源访问（postMessage 必需）"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  ];"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"  // 根据声明的权限动态添加"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"  if"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" (permissions?.camera) allows."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"push"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'camera'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:");"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"  if"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" (permissions?.microphone) allows."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"push"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'microphone'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:");"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"  if"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" (permissions?.geolocation) allows."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"push"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'geolocation'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:");"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"  if"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" (permissions?.clipboardWrite) allows."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"push"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'clipboard-write'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:");"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"  return"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" allows."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"join"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'; '"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:");"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"}"})})]})})}),`
`,i.jsxs(s.p,{children:[i.jsx(s.strong,{children:"注意"}),"：",i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"allow-same-origin"})})})})," 是 postMessage 通信的必要条件，但不会授予 App 访问父窗口 DOM 的能力。"]}),`
`,i.jsx(s.h3,{children:"6.3 双层 iframe 架构（推荐）"}),`
`,i.jsxs(s.p,{children:["为了进一步增强安全性，规范建议使用",i.jsx(s.strong,{children:"双层 iframe 架构"}),"："]}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"Host Window"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"  └── Sandbox iframe (验证来源)"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"        └── Resource iframe (运行 App)"})})]})})}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"外层 iframe"}),"：作为安全代理，验证内层消息的来源"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"内层 iframe"}),"：实际运行 App"]}),`
`]}),`
`,i.jsx(s.p,{children:"这种架构可以防止恶意 App 伪造消息来源。"}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{children:"第七部分：显示模式"}),`
`,i.jsx(s.h3,{children:"7.1 三种模式"}),`
`,i.jsxs(s.table,{children:[i.jsx(s.thead,{children:i.jsxs(s.tr,{children:[i.jsx(s.th,{children:"模式"}),i.jsx(s.th,{children:"说明"}),i.jsx(s.th,{children:"适用场景"})]})}),i.jsxs(s.tbody,{children:[i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"inline"})})})})}),i.jsx(s.td,{children:"嵌入对话流"}),i.jsx(s.td,{children:"默认模式，小型组件"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"fullscreen"})})})})}),i.jsx(s.td,{children:"全屏覆盖"}),i.jsx(s.td,{children:"复杂交互、沉浸式体验"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"pip"})})})})}),i.jsx(s.td,{children:"画中画"}),i.jsx(s.td,{children:"持续监控、视频播放"})]})]})]}),`
`,i.jsx(s.h3,{children:"7.2 模式切换"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// View 请求切换到全屏模式"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"await"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" app."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"requestDisplayMode"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"({ mode: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'fullscreen'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" });"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 监听模式变化"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"app."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"onhostcontextchanged"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" context"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" =>"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"  if"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" (context.displayMode) {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    console."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"log"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'Display mode changed to:'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", context.displayMode);"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"    // 根据模式调整布局"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"};"})})]})})}),`
`,i.jsx(s.h3,{children:"7.3 响应式设计要点"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 使用 containerSize 适应容器"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"const"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"width"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"height"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" hostContext.containerSize "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"??"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {};"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 处理刘海屏等安全区域"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"const"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"top"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"right"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"bottom"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"left"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" hostContext.safeAreaInsets "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"??"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {};"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 根据平台调整触控交互"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"if"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" (hostContext.platform "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"==="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" 'mobile'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:") {"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"  // 增大点击目标、优化手势"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"}"})})]})})}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{children:"第八部分：实战开发指南"}),`
`,i.jsx(s.h3,{children:"8.1 项目结构（推荐）"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"my-mcp-app/"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"├── src/"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"│   ├── server/"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"│   │   └── index.ts        # MCP 服务器"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"│   └── view/"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"│       ├── index.html      # View 入口"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"│       ├── app.tsx         # React 组件"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"│       └── styles.css      # 样式"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"├── dist/                   # 构建输出"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"├── package.json"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"├── tsconfig.json"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"└── vite.config.ts"})})]})})}),`
`,i.jsx(s.h3,{children:"8.2 最小示例 - 服务器端"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" { McpServer } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" '@modelcontextprotocol/sdk/server/mcp.js'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  registerAppTool,"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  registerAppResource,"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  RESOURCE_MIME_TYPE,"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"} "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" '@modelcontextprotocol/ext-apps/server'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" { readFileSync } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" 'fs'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" server"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" new"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:" McpServer"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"({"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  name: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'my-app'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  version: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'1.0.0'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"});"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" resourceUri"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" 'ui://my-app/dashboard.html'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 注册带 UI 的工具"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"registerAppTool"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  server,"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"  'show-dashboard'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  {"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    title: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'Show Dashboard'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    description: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'显示交互式仪表盘'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    inputSchema: {"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      type: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'object'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      properties: {"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"        data: { type: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'array'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", description: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'要展示的数据'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" },"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      },"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    },"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    _meta: {"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      ui: { resourceUri },"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    },"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  },"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"  async"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" args"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" =>"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"    // 工具逻辑 - 返回的数据会通过 tool-result 发送给 View"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"    return"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      content: [{ type: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'text'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", text: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'Dashboard ready'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" }],"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      structuredContent: { chartData: args.data },"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    };"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:");"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 注册 UI 资源"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"registerAppResource"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  server,"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"  'dashboard'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  resourceUri,"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  { mimeType: "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"RESOURCE_MIME_TYPE"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" },"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"  async"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" () "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"=>"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"    const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" html"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:" readFileSync"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'./dist/dashboard.html'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'utf-8'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:");"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"    return"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      contents: [{ uri: resourceUri, text: html }],"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    };"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:");"})})]})})}),`
`,i.jsx(s.h3,{children:"8.3 最小示例 - View 端 (Vanilla JS)"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"html","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"html","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"<!"}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:"DOCTYPE"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" html"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"<"}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:"html"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  <"}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:"head"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    <"}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:"script"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" type"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:'"module"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"      import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" { App, PostMessageTransport } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" '@modelcontextprotocol/ext-apps'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"      const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" app"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" new"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:" App"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"({ name: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'my-view'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", version: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'1.0.0'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" });"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"      const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" transport"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" new"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:" PostMessageTransport"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"();"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"      // 处理工具输入（工具被调用时的参数）"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      app."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"ontoolinput"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" input"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" =>"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"        console."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"log"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'Tool input:'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", input);"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      };"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"      // 处理工具结果（工具执行完成后的数据）"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      app."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"ontoolresult"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" result"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" =>"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"        const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" data"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" result.structuredContent?.chartData;"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"        document."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"getElementById"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'result'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:").textContent "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" JSON"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"stringify"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"(data, "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"null"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"2"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:");"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      };"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"      await"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" app."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"connect"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"(transport);"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    </"}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:"script"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  </"}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:"head"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  <"}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:"body"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    <"}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:"div"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" id"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:'"result"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">Loading...</"}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:"div"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  </"}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:"body"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"</"}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:"html"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">"})]})]})})}),`
`,i.jsx(s.h3,{children:"8.4 最小示例 - View 端 (React)"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"tsx","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"tsx","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" { useApp, useHostStyleVariables } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" '@modelcontextprotocol/ext-apps/react'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"export"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" default"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" function"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:" Dashboard"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"() "}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"{"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"  const"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"app"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"toolInput"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"toolResult"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"hostContext"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:" useApp"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"({"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    name: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'my-view'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    version: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'1.0.0'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  });"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"  // 自动应用宿主主题的 CSS 变量"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  useHostStyleVariables"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"(app, hostContext);"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"  // 主动调用服务器工具"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"  const"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:" handleRefresh"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" async"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" () "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"=>"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"    const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" result"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" await"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" app?."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"callServerTool"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"({"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      name: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'get-data'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      arguments: { filter: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'recent'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" },"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    });"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    console."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"log"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'Fresh data:'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", result);"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  };"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"  return"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" ("})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    <"}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:"div"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"      style"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"={"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"{"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"        background: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'var(--color-background-primary)'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"        color: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'var(--color-text-primary)'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      }"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"}"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    >"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      <"}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:"h1"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">Dashboard</"}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:"h1"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      <"}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:"button"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" onClick"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"={"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"handleRefresh"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"}"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">Refresh Data</"}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:"button"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      <"}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:"pre"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"{"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"JSON"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"stringify"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"(toolResult?.structuredContent, "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"null"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"2"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"}"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"</"}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:"pre"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    </"}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:"div"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:">"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  );"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"}"})})]})})}),`
`,i.jsx(s.h3,{children:"8.5 构建配置 (Vite)"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// vite.config.ts"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" { defineConfig } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" 'vite'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" react "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" '@vitejs/plugin-react'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" { viteSingleFile } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" 'vite-plugin-singlefile'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"export"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" default"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:" defineConfig"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"({"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  plugins: ["}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"react"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"(), "}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"viteSingleFile"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"()]"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  build: {"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    outDir: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'dist'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    rollupOptions: {"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      input: process.env."}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"INPUT"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ||"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" 'src/view/index.html'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    },"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  }"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"})"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]})]})})}),`
`,i.jsxs(s.p,{children:[i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"viteSingleFile"})})})})," 插件会将所有资源内联到单个 HTML 文件中，这是 MCP App 的推荐做法——简化分发，避免外部依赖。"]}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{children:"第九部分：高级模式"}),`
`,i.jsx(s.h3,{children:"9.1 App-Only 工具"}),`
`,i.jsx(s.p,{children:'创建仅 UI 可调用的"内部工具"：'}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"registerAppTool"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  server,"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"  'internal-fetch'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  {"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    description: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'Internal data fetching (UI only)'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    inputSchema: {"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      type: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'object'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      properties: {"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"        endpoint: { type: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'string'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" },"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      },"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    },"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    _meta: {"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      ui: {"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"        resourceUri: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'ui://app/view.html'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"        visibility: ["}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'app'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"], "}),i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 关键：仅 app 可见，LLM 不可调用"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      },"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    },"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  },"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"  async"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" args"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" =>"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"    const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" data"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" await"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:" fetchInternal"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"(args.endpoint);"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"    return"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" { content: [{ type: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'text'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", text: "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"JSON"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"stringify"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"(data) }] };"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:");"})})]})})}),`
`,i.jsx(s.h3,{children:"9.2 大数据分块加载"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 服务器端 - 支持分页"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"registerAppTool"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  server,"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"  'load-data'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  {"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    inputSchema: {"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      type: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'object'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      properties: {"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"        offset: { type: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'number'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", default: "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"0"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" },"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"        limit: { type: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'number'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", default: "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"100"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" },"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      },"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    },"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    _meta: { ui: { resourceUri, visibility: ["}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'app'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"] } },"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  },"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"  async"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" args"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" =>"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"    const"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"offset"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" 0"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"limit"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" 100"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" args;"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"    const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" data"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" await"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:" fetchData"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"(offset, limit);"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"    return"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      content: [{ type: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'text'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", text: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"`Loaded ${"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"data"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"length"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"} items`"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" }],"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      structuredContent: {"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"        items: data,"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"        hasMore: data."}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"length"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ==="}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" limit,"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"        nextOffset: offset "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"+"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" data."}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"length"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      },"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    };"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:");"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// View 端 - 增量加载"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"const"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:" loadMore"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" async"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" () "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"=>"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"  const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" result"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" await"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" app."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"callServerTool"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"({"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    name: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'load-data'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    arguments: { offset: items."}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"length"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", limit: "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"100"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" },"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  });"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"  const"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" { "}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"items"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"newItems"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"hasMore"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" result.structuredContent;"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  setItems"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"prev"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" =>"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" ["}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"..."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"prev, "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"..."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"newItems]);"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  setHasMore"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"(hasMore);"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"};"})})]})})}),`
`,i.jsx(s.h3,{children:"9.3 更新模型上下文"}),`
`,i.jsx(s.p,{children:"让 LLM 知道用户在 UI 中做了什么："}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 用户在 UI 中选择了某个选项"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"const"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:" handleSelection"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" async"}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" selectedItem"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" =>"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"  // 更新模型上下文，让 LLM 知道用户的选择"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"  await"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" app."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"updateModelContext"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"({"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    content: ["})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      {"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"        type: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'text'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"        text: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"`用户在仪表盘中选择了: ${"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"selectedItem"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"name"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"} (ID: ${"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"selectedItem"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"id"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"})`"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      },"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    ],"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  });"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"};"})})]})})}),`
`,i.jsx(s.p,{children:'这样，当用户接下来问"帮我分析刚才选的那个"时，LLM 就知道是什么。'}),`
`,i.jsx(s.h3,{children:"9.4 流式工具输入"}),`
`,i.jsx(s.p,{children:"当工具输入数据较大时，宿主可以分块发送："}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// View 端 - 处理部分输入"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"app."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"ontoolinputpartial"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" partial"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" =>"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"  // 显示加载进度"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  setLoadingText"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"(partial.input?.partialText "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"||"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" 'Loading...'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:");"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"};"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"app."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"ontoolinput"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" input"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" =>"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"  // 完整输入到达"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  setLoadingText"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"null"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:");"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"  processInput"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"(input);"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"};"})})]})})}),`
`,i.jsx(s.h3,{children:"9.5 主题同步"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 自动应用宿主主题"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"app."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"onhostcontextchanged"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" context"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" =>"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"  // 设置 data-theme 属性"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  document.documentElement.dataset.theme "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" context.theme;"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"  // 应用 CSS 变量"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"  if"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" (context.styles) {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"    for"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" ("}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"const"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" ["}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"key"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"value"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"] "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"of"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" Object."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"entries"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"(context.styles)) {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      document.documentElement.style."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"setProperty"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"(key, value);"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"};"})})]})})}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{children:"第十部分：与 OpenAI Apps SDK 对比"}),`
`,i.jsx(s.h3,{children:"10.1 关系说明"}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"ext-apps（MCP Apps）"}),"：MCP 官方规范 + SDK，跨平台标准"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"OpenAI Apps SDK"}),"：ChatGPT 特定实现，基于 MCP Apps 规范"]}),`
`]}),`
`,i.jsxs(s.p,{children:["两者",i.jsx(s.strong,{children:"不是竞争关系"}),"，而是",i.jsx(s.strong,{children:"规范与实现"}),"的关系。OpenAI Apps SDK 是 MCP Apps 规范在 ChatGPT 平台上的官方实现。"]}),`
`,i.jsx(s.h3,{children:"10.2 主要差异"}),`
`,i.jsxs(s.table,{children:[i.jsx(s.thead,{children:i.jsxs(s.tr,{children:[i.jsx(s.th,{children:"方面"}),i.jsx(s.th,{children:"ext-apps (MCP Apps)"}),i.jsx(s.th,{children:"OpenAI Apps SDK"})]})}),i.jsxs(s.tbody,{children:[i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"定位"})}),i.jsx(s.td,{children:"协议规范 + 通用 SDK"}),i.jsx(s.td,{children:"ChatGPT 特定框架"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"元数据前缀"})}),i.jsx(s.td,{children:"无特定前缀"}),i.jsx(s.td,{children:i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"openai/*"})})})})})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"状态管理"})}),i.jsx(s.td,{children:"由 App 自行实现"}),i.jsxs(s.td,{children:[i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"widgetSessionId"})})})})," + ",i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"widgetState"})})})})]})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"传输方式"})}),i.jsx(s.td,{children:"stdio, SSE, HTTP"}),i.jsx(s.td,{children:"主要 SSE"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"UI 库"})}),i.jsx(s.td,{children:"任意"}),i.jsx(s.td,{children:i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"@openai/apps-sdk-ui"})})})})})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"认证"})}),i.jsx(s.td,{children:"通过 MCP 标准"}),i.jsx(s.td,{children:"OAuth RFC 9728"})]})]})]}),`
`,i.jsx(s.h3,{children:"10.3 迁移指南"}),`
`,i.jsx(s.p,{children:"从 OpenAI Apps SDK 迁移到 MCP Apps："}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// OpenAI Apps SDK"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" meta"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"  'openai/outputTemplate'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'ui://widget/view.html'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"  'openai/widgetSessionId'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:": sessionId,"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"  'openai/widgetState'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:": { count: "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"0"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" },"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"};"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// MCP Apps (ext-apps)"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"const"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" meta"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  ui: { resourceUri: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'ui://widget/view.html'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" },"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"};"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 状态管理通过 updateModelContext 或自定义工具实现"})})]})})}),`
`,i.jsx(s.h3,{children:"10.4 OpenAI 特有功能"}),`
`,i.jsx(s.p,{children:"OpenAI Apps SDK 提供了一些 ChatGPT 特定的 API："}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 从 Widget 调用工具"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"window.openai."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"callTool"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"({ name: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:'"search"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", arguments: {"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"..."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"} })"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 发送后续消息（触发新的 LLM 响应）"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"window.openai."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"sendFollowUpMessage"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:'"继续分析..."'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:")"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 打开模态框"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"window.openai."}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"requestModal"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"({ "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"..."}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" })"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// widgetState 自动持久化到会话"})})]})})}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{children:"第十一部分：客户端支持"}),`
`,i.jsx(s.h3,{children:"11.1 已支持的客户端"}),`
`,i.jsxs(s.table,{children:[i.jsx(s.thead,{children:i.jsxs(s.tr,{children:[i.jsx(s.th,{children:"客户端"}),i.jsx(s.th,{children:"状态"}),i.jsx(s.th,{children:"备注"})]})}),i.jsxs(s.tbody,{children:[i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"Claude (Web & Desktop)"})}),i.jsx(s.td,{children:"✅ 已支持"}),i.jsx(s.td,{children:"首批支持，完整实现"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"ChatGPT"})}),i.jsx(s.td,{children:"✅ 已支持"}),i.jsx(s.td,{children:"2026-01-26 发布周上线"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"Goose"})}),i.jsx(s.td,{children:"✅ 已支持"}),i.jsx(s.td,{children:"Block 开源项目"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"VS Code Insiders"})}),i.jsx(s.td,{children:"✅ 已支持"}),i.jsx(s.td,{children:"GitHub Copilot 集成"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"Postman"})}),i.jsx(s.td,{children:"✅ 已支持"}),i.jsx(s.td,{children:"API 测试工具"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"MCPJam"})}),i.jsx(s.td,{children:"✅ 已支持"}),i.jsx(s.td,{children:"社区客户端"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"JetBrains IDEs"})}),i.jsx(s.td,{children:"🚧 开发中"}),i.jsx(s.td,{children:"已表达支持意向"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"AWS (Bedrock)"})}),i.jsx(s.td,{children:"🚧 开发中"}),i.jsx(s.td,{children:"已表达支持意向"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"Google DeepMind"})}),i.jsx(s.td,{children:"🚧 开发中"}),i.jsx(s.td,{children:"Antigravity 团队探索中"})]})]})]}),`
`,i.jsx(s.h3,{children:"11.2 配置示例 (Claude Desktop)"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"json","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"json","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"{"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:'  "mcpServers"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:": {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:'    "my-app"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:": {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:'      "command"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:'"node"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:'      "args"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:": ["}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:'"path/to/server.js"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"]"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"}"})})]})})}),`
`,i.jsx(s.h3,{children:"11.3 配置示例 (VS Code)"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"json","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"json","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"{"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:'  "mcpServers"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:": {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:'    "my-app"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:": {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:'      "command"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:'"npx"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:'      "args"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:": ["}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:'"-y"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:'"@modelcontextprotocol/server-my-app"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:'"--stdio"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"]"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"}"})})]})})}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{children:"第十二部分：示例项目速览"}),`
`,i.jsx(s.h3,{children:"12.1 ext-apps 官方示例"}),`
`,i.jsxs(s.table,{children:[i.jsx(s.thead,{children:i.jsxs(s.tr,{children:[i.jsx(s.th,{children:"类别"}),i.jsx(s.th,{children:"示例"}),i.jsx(s.th,{children:"技术栈"}),i.jsx(s.th,{children:"演示功能"})]})}),i.jsxs(s.tbody,{children:[i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"基础模板"})}),i.jsx(s.td,{children:"basic-server-react"}),i.jsx(s.td,{children:"React"}),i.jsx(s.td,{children:"基础 Hooks 使用"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{}),i.jsx(s.td,{children:"basic-server-vue"}),i.jsx(s.td,{children:"Vue 3"}),i.jsx(s.td,{children:"组合式 API"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{}),i.jsx(s.td,{children:"basic-server-svelte"}),i.jsx(s.td,{children:"Svelte"}),i.jsx(s.td,{children:"响应式编程"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{}),i.jsx(s.td,{children:"basic-server-vanillajs"}),i.jsx(s.td,{children:"Vanilla JS"}),i.jsx(s.td,{children:"无框架实现"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"3D/可视化"})}),i.jsx(s.td,{children:"map-server"}),i.jsx(s.td,{children:"CesiumJS"}),i.jsx(s.td,{children:"3D 地球"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{}),i.jsx(s.td,{children:"threejs-server"}),i.jsx(s.td,{children:"Three.js"}),i.jsx(s.td,{children:"3D 场景"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{}),i.jsx(s.td,{children:"shadertoy-server"}),i.jsx(s.td,{children:"GLSL"}),i.jsx(s.td,{children:"实时着色器"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"文档媒体"})}),i.jsx(s.td,{children:"pdf-server"}),i.jsx(s.td,{children:"PDF.js"}),i.jsx(s.td,{children:"PDF 分块加载"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{}),i.jsx(s.td,{children:"video-resource-server"}),i.jsx(s.td,{children:"-"}),i.jsx(s.td,{children:"二进制视频"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{}),i.jsx(s.td,{children:"sheet-music-server"}),i.jsx(s.td,{children:"abc2svg"}),i.jsx(s.td,{children:"乐谱渲染"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"数据分析"})}),i.jsx(s.td,{children:"cohort-heatmap-server"}),i.jsx(s.td,{children:"ECharts"}),i.jsx(s.td,{children:"留存热力图"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{}),i.jsx(s.td,{children:"customer-segmentation-server"}),i.jsx(s.td,{children:"-"}),i.jsx(s.td,{children:"聚类散点图"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{}),i.jsx(s.td,{children:"wiki-explorer-server"}),i.jsx(s.td,{children:"Cytoscape"}),i.jsx(s.td,{children:"知识图谱"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"商业应用"})}),i.jsx(s.td,{children:"scenario-modeler-server"}),i.jsx(s.td,{children:"-"}),i.jsx(s.td,{children:"SaaS 财务预测"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{}),i.jsx(s.td,{children:"budget-allocator-server"}),i.jsx(s.td,{children:"-"}),i.jsx(s.td,{children:"预算分配"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"工具"})}),i.jsx(s.td,{children:"system-monitor-server"}),i.jsx(s.td,{children:"-"}),i.jsx(s.td,{children:"实时系统监控"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{}),i.jsx(s.td,{children:"transcript-server"}),i.jsx(s.td,{children:"WebAPI"}),i.jsx(s.td,{children:"语音转录"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{}),i.jsx(s.td,{children:"qr-server (Python)"}),i.jsx(s.td,{children:"-"}),i.jsx(s.td,{children:"二维码生成"})]})]})]}),`
`,i.jsx(s.h3,{children:"12.2 运行示例"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"bash","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"bash","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"# 克隆仓库"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"git"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" clone"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" https://github.com/modelcontextprotocol/ext-apps.git"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"cd"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" ext-apps"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"# 安装依赖"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"npm"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" install"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"# 启动所有示例（使用 basic-host）"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"npm"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" start"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"# 访问 http://localhost:8080/"})})]})})}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{children:"第十三部分：测试与调试"}),`
`,i.jsx(s.h3,{children:"13.1 本地测试"}),`
`,i.jsxs(s.p,{children:["使用 ",i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"basic-host"})})})})," 测试你的 MCP App："]}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"bash","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"bash","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"# 启动 basic-host"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"cd"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" ext-apps/examples/basic-host"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"npm"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" install"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" && "}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"npm"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" start"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"# 在另一个终端启动你的服务器"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"cd"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" your-app"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" && "}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"npm"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" run"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" serve"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"# 配置 basic-host 连接你的服务器"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"SERVERS"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"="}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:`'["http://localhost:3001"]'`}),i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:" npm"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" start"})]})]})})}),`
`,i.jsx(s.h3,{children:"13.2 使用 Claude 测试"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"bash","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"bash","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"# 使用 cloudflared 暴露本地服务器"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FFA657","--shiki-light":"#953800"},children:"npx"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" cloudflared"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" tunnel"}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:" --url"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" http://localhost:3001"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"# 复制生成的 URL（如 https://xxx.trycloudflare.com）"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"# 在 Claude 设置中添加为 Custom Connector"})})]})})}),`
`,i.jsx(s.h3,{children:"13.3 常见问题排查"}),`
`,i.jsxs(s.table,{children:[i.jsx(s.thead,{children:i.jsxs(s.tr,{children:[i.jsx(s.th,{children:"问题"}),i.jsx(s.th,{children:"可能原因"}),i.jsx(s.th,{children:"解决方案"})]})}),i.jsxs(s.tbody,{children:[i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"外部请求被阻止"}),i.jsx(s.td,{children:"CSP 未声明域"}),i.jsxs(s.td,{children:["在 ",i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"_meta.ui.csp.connectDomains"})})})})," 添加域"]})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"postMessage 失败"}),i.jsx(s.td,{children:"沙箱配置错误"}),i.jsxs(s.td,{children:["确保 ",i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"allow-same-origin"})})})})," 存在"]})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"主题不同步"}),i.jsx(s.td,{children:"未监听上下文变化"}),i.jsxs(s.td,{children:["实现 ",i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"onhostcontextchanged"})})})})," 处理器"]})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"工具调用超时"}),i.jsx(s.td,{children:"服务器响应慢"}),i.jsx(s.td,{children:"检查服务器日志，优化处理逻辑"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"UI 不显示"}),i.jsx(s.td,{children:"资源加载失败"}),i.jsx(s.td,{children:"检查 resourceUri 是否正确"})]})]})]}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{children:"第十四部分：最佳实践"}),`
`,i.jsx(s.h3,{children:"14.1 应该做的 ✅"}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"使用 CSS 变量实现主题适配"}),"：让你的 App 在明暗主题下都有良好表现"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"响应 displayMode 变化"}),"：根据 inline/fullscreen/pip 调整布局"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"提供文本 fallback"}),"：支持不支持 MCP App 的客户端"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"使用 TypeScript"}),"：确保类型安全，减少运行时错误"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"分块加载大数据集"}),"：避免一次性传输过多数据"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"显式声明所需的 CSP 域"}),"：最小权限原则"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"实现 teardown 清理"}),"：释放资源、取消订阅"]}),`
`]}),`
`,i.jsx(s.h3,{children:"14.2 不应该做的 ❌"}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"在 View 中存储敏感数据"}),"：iframe 可能被其他脚本访问"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"假设固定的容器尺寸"}),"：使用响应式设计"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"忽略 teardown 事件"}),"：可能导致内存泄漏"]}),`
`,i.jsxs(s.li,{children:[i.jsxs(s.strong,{children:["使用 ",i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"*"})})})})," 通配符 CSP 域"]}),"：安全风险"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"阻塞主线程"}),"：使用 Web Worker 处理耗时操作"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"依赖外部 CDN 不声明"}),"：会被 CSP 阻止"]}),`
`]}),`
`,i.jsx(s.h3,{children:"14.3 性能优化"}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 1. 使用 viteSingleFile 内联所有资源"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" { viteSingleFile } "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"from"}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:" 'vite-plugin-singlefile'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:";"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 2. 启用 gzip 压缩"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 服务器返回时设置 Content-Encoding: gzip"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 3. 懒加载重型库"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"const"}),i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:" loadThreeJs"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" ="}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" () "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"=>"}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:" import"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'three'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:");"})]}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 4. 使用 requestIdleCallback 处理非关键任务"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"requestIdleCallback"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"(() "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"=>"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" {"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"  // 预加载、分析等非关键操作"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"});"})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 5. 使用虚拟滚动处理长列表"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 推荐：react-window, vue-virtual-scroller"})})]})})}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{children:"第十五部分：MCP App 的影响与变革"}),`
`,i.jsx(s.h3,{children:"15.1 对 AI 生态的影响"}),`
`,i.jsx(s.h4,{children:'打破"纯文本响应"的范式'}),`
`,i.jsx(s.p,{children:'传统的 AI Agent 只能返回文本。即使有"代码执行"能力，最终呈现给用户的仍然是文本或静态图片。'}),`
`,i.jsx(s.p,{children:"MCP App 改变了这一点："}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"Before MCP App:"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:'User: "帮我生成一个饼图展示销售数据"'})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:'Agent: "好的，这是数据：{...}，您可以复制到 Excel 中生成图表"'})}),`
`,i.jsx(s.span,{"data-line":"",children:" "}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"After MCP App:"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:'User: "帮我生成一个饼图展示销售数据"'})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"Agent: [直接渲染交互式 ECharts 饼图，支持悬停查看详情、导出图片]"})})]})})}),`
`,i.jsx(s.h4,{children:"推动 Agent 生态标准化"}),`
`,i.jsxs(s.p,{children:["MCP App 是",i.jsx(s.strong,{children:"第一个跨公司、跨平台"}),"的 AI Agent UI 标准："]}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsx(s.li,{children:"Anthropic、OpenAI、Block、Microsoft 共同参与"}),`
`,i.jsx(s.li,{children:"同一个 MCP App 可以在 Claude、ChatGPT、VS Code 中运行"}),`
`,i.jsx(s.li,{children:"开发者只需写一次代码"}),`
`]}),`
`,i.jsx(s.p,{children:'这避免了生态碎片化——不会出现"Claude 专用插件"、"ChatGPT 专用 Widget"的局面。'}),`
`,i.jsx(s.h4,{children:"企业级 AI 应用加速"}),`
`,i.jsxs(s.p,{children:["根据 Forrester 2026 预测，",i.jsx(s.strong,{children:"30% 的企业应用厂商"}),"将推出自己的 MCP 服务器。"]}),`
`,i.jsx(s.p,{children:"MCP App 让企业能够："}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsx(s.li,{children:"将内部系统封装为 MCP App，向 AI Agent 暴露能力"}),`
`,i.jsx(s.li,{children:"避免供应商锁定，灵活选择 AI 平台"}),`
`,i.jsx(s.li,{children:"统一内部工具的 AI 集成标准"}),`
`]}),`
`,i.jsx(s.h3,{children:"15.2 对开发者的影响"}),`
`,i.jsx(s.h4,{children:"新的技能要求"}),`
`,i.jsxs(s.table,{children:[i.jsx(s.thead,{children:i.jsxs(s.tr,{children:[i.jsx(s.th,{children:"传统 MCP 开发"}),i.jsx(s.th,{children:"MCP App 开发"})]})}),i.jsxs(s.tbody,{children:[i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"后端为主"}),i.jsx(s.td,{children:"前后端结合"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"JSON 数据处理"}),i.jsx(s.td,{children:"UI/UX 设计"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"无需考虑安全沙箱"}),i.jsx(s.td,{children:"需理解 CSP、iframe 安全"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"单平台适配"}),i.jsx(s.td,{children:"跨平台主题/响应式"})]})]})]}),`
`,i.jsx(s.h4,{children:"降低分发门槛"}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"无需独立部署"}),"：UI 作为资源嵌入 MCP Server"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"无需应用商店审核"}),"：配置 MCP 服务器即可使用"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"即时更新"}),"：修改代码即生效，无需用户升级"]}),`
`]}),`
`,i.jsx(s.h3,{children:"15.3 对产品交互的变革"}),`
`,i.jsxs(s.table,{children:[i.jsx(s.thead,{children:i.jsxs(s.tr,{children:[i.jsx(s.th,{children:"场景"}),i.jsx(s.th,{children:"传统体验"}),i.jsx(s.th,{children:"MCP App 体验"})]})}),i.jsxs(s.tbody,{children:[i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"数据可视化"}),i.jsx(s.td,{children:"返回数据让用户自己画图"}),i.jsx(s.td,{children:"直接渲染交互式图表"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"表单填写"}),i.jsx(s.td,{children:"多轮对话逐个询问字段"}),i.jsx(s.td,{children:"一次性表单输入"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"文件预览"}),i.jsx(s.td,{children:"返回下载链接"}),i.jsx(s.td,{children:"内嵌 PDF/3D 查看器"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"配置向导"}),i.jsx(s.td,{children:"逐步文字引导"}),i.jsx(s.td,{children:"可视化步骤指示器"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"地图导航"}),i.jsx(s.td,{children:"返回地址文本"}),i.jsx(s.td,{children:"嵌入交互式地图"})]})]})]}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{children:"第十六部分：与 Google A2UI 的对比"}),`
`,i.jsx(s.h3,{children:"16.1 A2UI 简介"}),`
`,i.jsxs(s.p,{children:[i.jsx(s.strong,{children:"A2UI（Agent-to-User Interface）"})," 是 Google 于 2025 年 12 月发布的另一个 Agent UI 协议。"]}),`
`,i.jsxs(s.p,{children:["核心理念：",i.jsx(s.strong,{children:"声明式组件描述"}),"，而非可执行代码。"]}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"Agent 输出 A2UI JSON 描述"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"        ↓"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"Client 读取组件描述"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"        ↓"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"映射到本地原生组件"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"        ↓"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"用户看到原生风格的 UI"})})]})})}),`
`,i.jsx(s.h3,{children:"16.2 核心差异"}),`
`,i.jsxs(s.table,{children:[i.jsx(s.thead,{children:i.jsxs(s.tr,{children:[i.jsx(s.th,{children:"维度"}),i.jsx(s.th,{children:"MCP Apps"}),i.jsx(s.th,{children:"Google A2UI"})]})}),i.jsxs(s.tbody,{children:[i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"核心理念"})}),i.jsx(s.td,{children:"嵌入式 Web 应用"}),i.jsx(s.td,{children:"声明式组件描述"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"UI 实现"})}),i.jsx(s.td,{children:"完整 HTML/CSS/JS（iframe）"}),i.jsx(s.td,{children:"JSON 组件声明（原生渲染）"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"灵活性"})}),i.jsx(s.td,{children:"高（可用任意前端技术）"}),i.jsx(s.td,{children:"受限（只能用预定义组件）"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"安全模型"})}),i.jsx(s.td,{children:"iframe 沙箱 + CSP"}),i.jsx(s.td,{children:"组件白名单目录"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"开发门槛"})}),i.jsx(s.td,{children:"需前端开发经验"}),i.jsx(s.td,{children:"LLM 可直接生成"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:i.jsx(s.strong,{children:"渲染一致性"})}),i.jsx(s.td,{children:"跨平台保持一致"}),i.jsx(s.td,{children:"依赖各平台原生实现"})]})]})]}),`
`,i.jsx(s.h3,{children:"16.3 技术路线对比"}),`
`,i.jsx(s.p,{children:i.jsx(s.strong,{children:'MCP Apps："Mini Web App"路线'})}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"typescript","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"typescript","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#8B949E","--shiki-light":"#6E7781"},children:"// 返回完整 HTML"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#D2A8FF","--shiki-light":"#8250DF"},children:"registerAppResource"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"("})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  server,"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"  'chart'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"  'ui://app/chart.html'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  {"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    mimeType: "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"RESOURCE_MIME_TYPE"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  },"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"  async"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" () "}),i.jsx(s.span,{style:{"--shiki-dark":"#FF7B72","--shiki-light":"#CF222E"},children:"=>"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" ({"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    contents: ["})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      {"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"        uri: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"'ui://app/chart.html'"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"        text: "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"`"})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"      <html>"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:'        <script src="echarts.min.js"><\/script>'})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"        <script>echarts.init(...)<\/script>"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:'        <div id="chart"></div>'})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"      </html>"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:"    `"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      },"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    ],"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  })"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:");"})})]})})}),`
`,i.jsx(s.p,{children:i.jsx(s.strong,{children:'A2UI："Native-First 声明式"路线'})}),`
`,i.jsx(s.figure,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.pre,{tabIndex:"0","data-language":"json","data-theme":"github-dark-default github-light-default",children:i.jsxs(s.code,{"data-language":"json","data-theme":"github-dark-default github-light-default",style:{display:"grid"},children:[i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"{"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:'  "components"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:": ["})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    {"})}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:'      "id"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:'"chart1"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:'      "type"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:'"PieChart"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:","})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:'      "props"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:": {"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:'        "data"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:": [{ "}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:'"label"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:'"A"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:", "}),i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:'"value"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#79C0FF","--shiki-light":"#0550AE"},children:"30"}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:" }],"})]}),`
`,i.jsxs(s.span,{"data-line":"",children:[i.jsx(s.span,{style:{"--shiki-dark":"#7EE787","--shiki-light":"#116329"},children:'        "title"'}),i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:": "}),i.jsx(s.span,{style:{"--shiki-dark":"#A5D6FF","--shiki-light":"#0A3069"},children:'"Sales"'})]}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"      }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"    }"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"  ]"})}),`
`,i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{style:{"--shiki-dark":"#E6EDF3","--shiki-light":"#1F2328"},children:"}"})})]})})}),`
`,i.jsx(s.h3,{children:"16.4 如何选择"}),`
`,i.jsxs(s.table,{children:[i.jsx(s.thead,{children:i.jsxs(s.tr,{children:[i.jsx(s.th,{children:"场景"}),i.jsx(s.th,{children:"推荐方案"})]})}),i.jsxs(s.tbody,{children:[i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"简单表单、列表、卡片"}),i.jsx(s.td,{children:"A2UI（更轻量）"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"复杂数据可视化（ECharts、D3）"}),i.jsx(s.td,{children:"MCP Apps（更灵活）"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"3D/地图/富媒体"}),i.jsx(s.td,{children:"MCP Apps（必需）"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"希望原生系统体验"}),i.jsx(s.td,{children:"A2UI"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"需要复杂交互逻辑"}),i.jsx(s.td,{children:"MCP Apps"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"LLM 直接生成 UI"}),i.jsx(s.td,{children:"A2UI"})]}),i.jsxs(s.tr,{children:[i.jsx(s.td,{children:"复用现有 Web 组件"}),i.jsx(s.td,{children:"MCP Apps"})]})]})]}),`
`,i.jsx(s.h3,{children:"16.5 可能的融合方向"}),`
`,i.jsx(s.p,{children:"两者并非完全互斥，未来可能："}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsx(s.li,{children:"MCP App 内部使用 A2UI 描述动态生成的 UI 片段"}),`
`,i.jsx(s.li,{children:"A2UI 组件目录扩展支持嵌入 MCP App"}),`
`,i.jsx(s.li,{children:'统一的 "Agent UI 协议" 整合两种模式'}),`
`]}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{children:"第十七部分：未来发展方向"}),`
`,i.jsx(s.h3,{children:"17.1 协议层面"}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"更多显示模式"}),"：除 inline/fullscreen/pip 外，可能增加 modal、sidebar 等"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"增强权限控制"}),"：更细粒度的设备访问、网络请求控制"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"与 A2UI 的融合"}),"：混合使用声明式组件和嵌入式 App"]}),`
`]}),`
`,i.jsx(s.h3,{children:"17.2 生态扩展"}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"更多客户端支持"}),"：JetBrains、AWS Bedrock、Google 等"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"组件模板库"}),"：常用 UI 模式的开箱即用模板"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"可视化构建工具"}),"：低代码/无代码 MCP App 构建器"]}),`
`]}),`
`,i.jsx(s.h3,{children:"17.3 技术能力增强"}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"多 App 协同"}),"：App 间状态共享和消息传递"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"离线与持久化"}),"：Service Worker 缓存、跨会话状态保留"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"更多设备权限"}),"：蓝牙、NFC、传感器等"]}),`
`]}),`
`,i.jsx(s.h3,{children:"17.4 垂直领域深化"}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"医疗健康"}),"：DICOM 医学影像查看器"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"金融服务"}),"：实时行情图表、风险仪表盘"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"工程设计"}),"：CAD 预览器、BIM 模型查看"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"教育培训"}),"：交互式课件、编程练习环境"]}),`
`]}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{children:"结论"}),`
`,i.jsxs(s.p,{children:["MCP App 是 MCP 协议的",i.jsx(s.strong,{children:"历史性扩展"}),'，标志着 AI Agent 生态从"工具调用"升级为"应用平台"。']}),`
`,i.jsxs(s.p,{children:[i.jsx(s.strong,{children:"关键要点回顾"}),"："]}),`
`,i.jsxs(s.ol,{children:[`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"MCP App = Tool + UI Resource"}),"，通过 ",i.jsx(s.span,{"data-rehype-pretty-code-figure":"",children:i.jsx(s.code,{"data-language":"plaintext","data-theme":"github-dark-default github-light-default",children:i.jsx(s.span,{"data-line":"",children:i.jsx(s.span,{children:"_meta.ui.resourceUri"})})})})," 关联"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"三层架构"}),"：Server → Host → View，通过 JSON-RPC 通信"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"多层安全"}),"：iframe 沙箱 + CSP + 权限声明 + 用户同意"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"跨平台支持"}),"：Claude、ChatGPT、VS Code、Goose 等"]}),`
`,i.jsxs(s.li,{children:[i.jsx(s.strong,{children:"生态意义"}),"：打破纯文本范式，推动 Agent UI 标准化"]}),`
`]}),`
`,i.jsxs(s.p,{children:["如果你正在开发 MCP 服务器，是时候考虑为你的工具添加交互式 UI 了。MCP App 让 AI Agent 真正成为一个",i.jsx(s.strong,{children:"可视化的应用平台"}),"，而不仅仅是一个对话框。"]}),`
`,i.jsx(s.hr,{}),`
`,i.jsx(s.h2,{children:"参考资料"}),`
`,i.jsx(s.h3,{children:"官方资源"}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsx(s.li,{children:i.jsx(s.a,{href:"https://github.com/modelcontextprotocol/ext-apps",children:"ext-apps 官方仓库"})}),`
`,i.jsx(s.li,{children:i.jsx(s.a,{href:"https://modelcontextprotocol.io/docs/extensions/apps",children:"MCP Apps 官方文档"})}),`
`,i.jsx(s.li,{children:i.jsx(s.a,{href:"https://modelcontextprotocol.github.io/ext-apps/api/",children:"API 文档"})}),`
`,i.jsx(s.li,{children:i.jsx(s.a,{href:"https://github.com/modelcontextprotocol/ext-apps/blob/main/specification/2026-01-26/apps.mdx",children:"规范文档 (2026-01-26)"})}),`
`]}),`
`,i.jsx(s.h3,{children:"博客文章"}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsx(s.li,{children:i.jsx(s.a,{href:"https://blog.modelcontextprotocol.io/posts/2026-01-26-mcp-apps/",children:"MCP Apps 1.0 发布公告 (2026-01-26)"})}),`
`,i.jsx(s.li,{children:i.jsx(s.a,{href:"https://blog.modelcontextprotocol.io/posts/2025-11-21-mcp-apps/",children:"MCP Apps 预览版公告 (2025-11-21)"})}),`
`]}),`
`,i.jsx(s.h3,{children:"相关项目"}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsx(s.li,{children:i.jsx(s.a,{href:"https://github.com/MCP-UI-Org/mcp-ui",children:"MCP-UI 社区项目"})}),`
`,i.jsx(s.li,{children:i.jsx(s.a,{href:"https://developers.openai.com/apps-sdk/",children:"OpenAI Apps SDK"})}),`
`,i.jsx(s.li,{children:i.jsx(s.a,{href:"https://a2ui.org/",children:"Google A2UI"})}),`
`]}),`
`,i.jsx(s.h3,{children:"社区讨论"}),`
`,i.jsxs(s.ul,{children:[`
`,i.jsx(s.li,{children:i.jsx(s.a,{href:"https://github.com/modelcontextprotocol/modelcontextprotocol/pull/1865",children:"SEP-1865 PR"})}),`
`,i.jsx(s.li,{children:i.jsx(s.a,{href:"https://github.com/modelcontextprotocol-community/working-groups/issues/35",children:"Working Group Issue #35"})}),`
`]})]})}function a(h={}){const{wrapper:s}=h.components||{};return s?i.jsx(s,{...h,children:i.jsx(l,{...h})}):l(h)}export{a as default,n as frontmatter};
