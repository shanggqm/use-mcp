---
title: 'ä¸€æ–‡å½»åº•ææ‡‚ MCP Appï¼šä»åè®®è§„èŒƒåˆ°å®æˆ˜å¼€å‘'
description: 'æ·±å…¥è§£æ MCP App æ¶æ„è®¾è®¡ã€åè®®è§„èŒƒã€SDK API å’Œæœ€ä½³å®è·µï¼Œå¸®åŠ©å¼€å‘è€…å…¨é¢ç†è§£å¦‚ä½•ä¸º AI Agent æ„å»ºäº¤äº’å¼ UI'
date: '2026-01-28'
tags: ['MCP', 'AI Agent', 'UI', 'SDK', 'Protocol']
lang: 'zh'
author: 'use-mcp.dev'
---

## å¤ªé•¿ä¸çœ‹

- **MCP App æ˜¯ä»€ä¹ˆ**ï¼šè¿è¡Œåœ¨ MCP å®¿ä¸» iframe ä¸­çš„äº¤äº’å¼ UI ç»„ä»¶ï¼Œè®© AI Agent èƒ½å¤Ÿè¿”å›å¯è§†åŒ–ç•Œé¢è€Œéçº¯æ–‡æœ¬
- **æ ¸å¿ƒå…¬å¼**ï¼šMCP App = Tool + UI Resourceï¼Œé€šè¿‡ `_meta.ui.resourceUri` å°†å·¥å…·ä¸ UI èµ„æºå…³è”
- **å¤šå±‚å®‰å…¨**ï¼šiframe æ²™ç®±éš”ç¦» + CSP å†…å®¹å®‰å…¨ç­–ç•¥ + æƒé™å£°æ˜ + ç”¨æˆ·åŒæ„æœºåˆ¶
- **å¹¿æ³›æ”¯æŒ**ï¼šClaudeã€ChatGPTã€VS Codeã€Goose ç­‰ä¸»æµå®¢æˆ·ç«¯å·²æ”¯æŒï¼Œé¦–æ¬¡å®ç°è·¨å¹³å° UI ä½“éªŒ
- **ç”Ÿæ€æ„ä¹‰**ï¼šæ‰“ç ´"çº¯æ–‡æœ¬å“åº”"èŒƒå¼ï¼Œæ¨åŠ¨ AI Agent ç”Ÿæ€ä»å·¥å…·è°ƒç”¨å‡çº§ä¸ºå®Œæ•´åº”ç”¨å¹³å°

---

## å¼•è¨€

2026 å¹´ 1 æœˆ 26 æ—¥ï¼ŒMCP å®˜æ–¹æ­£å¼å‘å¸ƒäº† MCP Apps 1.0 ç¨³å®šç‰ˆã€‚è¿™æ˜¯ MCP åè®®çš„**ç¬¬ä¸€ä¸ªå®˜æ–¹æ‰©å±•**ï¼Œæ ‡å¿—ç€ AI Agent ç”Ÿæ€ä»"å·¥å…·è°ƒç”¨"æ­£å¼è¿ˆå…¥"åº”ç”¨å¹³å°"æ—¶ä»£ã€‚

æƒ³è±¡è¿™æ ·ä¸€ä¸ªåœºæ™¯ï¼šä½ è®© AI å¸®ä½ åˆ†æé”€å”®æ•°æ®ï¼Œä¼ ç»Ÿçš„ MCP å·¥å…·ä¼šè¿”å›ä¸€å † JSON æ•°æ®æˆ–æ–‡æœ¬è¡¨æ ¼ï¼Œä½ éœ€è¦å¤åˆ¶åˆ° Excel æˆ–å…¶ä»–å·¥å…·ä¸­æ‰èƒ½å¯è§†åŒ–ã€‚è€Œæœ‰äº† MCP Appï¼ŒAI å¯ä»¥ç›´æ¥åœ¨å¯¹è¯ä¸­æ¸²æŸ“ä¸€ä¸ª**äº¤äº’å¼ä»ªè¡¨ç›˜**â€”â€”ä½ å¯ä»¥æ‚¬åœæŸ¥çœ‹è¯¦æƒ…ã€ç‚¹å‡»ç­›é€‰æ•°æ®ã€æ‹–æ‹½è°ƒæ•´å›¾è¡¨ï¼Œæ‰€æœ‰æ“ä½œéƒ½åœ¨å¯¹è¯çª—å£å†…å®Œæˆã€‚

è¿™ä¸æ˜¯ç§‘å¹»ï¼Œè¿™æ˜¯ MCP App æ­£åœ¨åšçš„äº‹æƒ…ã€‚

æœ¬æ–‡å°†å¸¦ä½ æ·±å…¥ç†è§£ MCP App çš„æ–¹æ–¹é¢é¢ï¼šä»è¯ç”ŸèƒŒæ™¯åˆ°æ¶æ„è®¾è®¡ï¼Œä»åè®®è§„èŒƒåˆ° SDK APIï¼Œä»å®‰å…¨æ¨¡å‹åˆ°å®æˆ˜å¼€å‘ï¼Œä¸€ç¯‡æ–‡ç« å¸®ä½ å½»åº•ææ‡‚ MCP Appã€‚

---

## ç¬¬ä¸€éƒ¨åˆ†ï¼šèƒŒæ™¯ä¸åŠ¨æœº

### 1.1 MCP åè®®çš„å±€é™æ€§

Model Context Protocol (MCP) åœ¨è®¾è®¡ä¹‹åˆï¼Œä¸»è¦è§£å†³çš„æ˜¯ AI æ¨¡å‹ä¸å¤–éƒ¨æ•°æ®/å·¥å…·çš„è¿æ¥é—®é¢˜ã€‚MCP å®šä¹‰äº†ä¸‰ç§æ ¸å¿ƒåŸè¯­ï¼š

- **Toolsï¼ˆå·¥å…·ï¼‰**ï¼šè®©æ¨¡å‹èƒ½å¤Ÿæ‰§è¡Œæ“ä½œ
- **Resourcesï¼ˆèµ„æºï¼‰**ï¼šè®©æ¨¡å‹èƒ½å¤Ÿè¯»å–æ•°æ®
- **Promptsï¼ˆæç¤ºè¯ï¼‰**ï¼šè®©æ¨¡å‹èƒ½å¤Ÿä½¿ç”¨é¢„è®¾çš„æç¤ºæ¨¡æ¿

ç„¶è€Œï¼ŒMCP åŸæœ¬åªæ”¯æŒ**æ–‡æœ¬å’Œç»“æ„åŒ–æ•°æ®**çš„äº¤æ¢ã€‚å½“å·¥å…·éœ€è¦å¯è§†åŒ–å±•ç¤ºæˆ–å¤æ‚ç”¨æˆ·è¾“å…¥æ—¶ï¼Œå®¿ä¸»å¿…é¡»è‡ªè¡Œæ„å»ºæ¸²æŸ“é€»è¾‘ã€‚è¿™å¯¼è‡´äº†ä¸€ä¸ªå°´å°¬çš„å±€é¢ï¼š

```text
ç”¨æˆ·: "å¸®æˆ‘ç”Ÿæˆä¸€ä¸ªé”€å”®æ•°æ®é¥¼å›¾"
Agent: "å¥½çš„ï¼Œè¿™æ˜¯æ•°æ®ï¼š{sales: [{region: 'åä¸œ', value: 3500}, ...]}ï¼Œ
        æ‚¨å¯ä»¥å¤åˆ¶åˆ° Excel æˆ– ECharts ä¸­ç”Ÿæˆå›¾è¡¨"
```

å¼€å‘è€…è¢«è¿«åˆ›å»ºå„ç§ ad-hoc è§£å†³æ–¹æ¡ˆï¼Œå¯¼è‡´ç”Ÿæ€ç¢ç‰‡åŒ–â€”â€”æ¯ä¸ªå®¿ä¸»æœ‰è‡ªå·±çš„ UI æ‰©å±•æ–¹å¼ï¼Œäº’ä¸å…¼å®¹ã€‚

### 1.2 ç¤¾åŒºéœ€æ±‚çš„æ¼”è¿›

ç¤¾åŒºå¯¹"UI over MCP"çš„éœ€æ±‚æ—©å·²æ˜¾ç°ï¼š

**Working Group Issue #35**ï¼š2025 å¹´ä¸­ï¼Œç¤¾åŒºåœ¨ MCP å·¥ä½œç»„æå‡ºäº† "UI Component Integration in MCP Responses" RFCï¼Œè®¨è®ºå¦‚ä½•åœ¨ MCP å“åº”ä¸­é›†æˆ UI ç»„ä»¶ã€‚

**MCP-UI ç¤¾åŒºé¡¹ç›®**ï¼šç”± Ido Salomon å’Œ Liad Yosef åˆ›å»ºçš„ [MCP-UI](https://mcpui.dev/) é¡¹ç›®ï¼Œåœ¨å®˜æ–¹è§„èŒƒå‡ºå°å‰å°±å·²ç§¯ç´¯äº† 4.2k+ starsï¼Œæˆä¸ºäº‹å®ä¸Šçš„å…ˆè¡Œæ¢ç´¢è€…ã€‚

ç¤¾åŒºçš„ä¸»è¦è¯‰æ±‚åŒ…æ‹¬ï¼š

- äº¤äº’å¼è¡¨å•ã€æŒ‰é’®ã€å¤šæ­¥å·¥ä½œæµ
- å®æ—¶æ•°æ®å¯è§†åŒ–ï¼ˆå›¾è¡¨ã€ä»ªè¡¨ç›˜ï¼‰
- é…ç½®å‘å¯¼ï¼ˆå¤šé€‰é¡¹ã€æ¡ä»¶ä¾èµ–ï¼‰
- å¯Œåª’ä½“æŸ¥çœ‹å™¨ï¼ˆPDFã€3D æ¨¡å‹ã€è§†é¢‘ï¼‰

### 1.3 Anthropic ä¸ OpenAI çš„åˆä½œ

2025 å¹´ 11 æœˆï¼ŒMCP å›¢é˜Ÿå‘å¸ƒäº† MCP Apps çš„é¦–æ¬¡å…¬å¼€é¢„è§ˆï¼Œæ•´åˆäº†ä¸¤ä¸ªé‡è¦çš„å¤–éƒ¨è´¡çŒ®ï¼š

1. **MCP-UI ç¤¾åŒºé¡¹ç›®**ï¼šæä¾›äº† UI èµ„æºçš„åŸºç¡€æ¨¡å¼
2. **OpenAI Apps SDK**ï¼šChatGPT çš„ Widget æœºåˆ¶ä¸ºåè®®è®¾è®¡æä¾›äº†å‚è€ƒ

ç»è¿‡æ•°æœˆçš„è¿­ä»£ï¼Œ2026 å¹´ 1 æœˆ 26 æ—¥ï¼ŒMCP Apps 1.0 æ­£å¼å‘å¸ƒã€‚è¿™æ˜¯ä¸€ä¸ªç½•è§çš„**è·¨å…¬å¸åä½œ**æ¡ˆä¾‹â€”â€”Anthropicã€OpenAIã€Blockã€Microsoft ç­‰å…¬å¸å…±åŒå‚ä¸äº†è§„èŒƒçš„åˆ¶å®šå’Œå®ç°ã€‚

---

## ç¬¬äºŒéƒ¨åˆ†ï¼šæ ¸å¿ƒæ¦‚å¿µä¸æ¶æ„

### 2.1 ä»€ä¹ˆæ˜¯ MCP App

**å®˜æ–¹å®šä¹‰**ï¼šMCP App æ˜¯è¿è¡Œåœ¨ MCP å®¿ä¸» iframe ä¸­çš„äº¤äº’å¼ UI ç»„ä»¶ã€‚

**æ ¸å¿ƒå…¬å¼**ï¼š

```text
MCP App = Tool + UI Resource
```

ä¸€ä¸ª MCP App ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š

1. **Toolï¼ˆå·¥å…·ï¼‰**ï¼šå£°æ˜äº† `_meta.ui.resourceUri` å­—æ®µï¼ŒæŒ‡å‘ UI èµ„æº
2. **UI Resourceï¼ˆUI èµ„æºï¼‰**ï¼šåŒ…å« HTML/CSS/JS çš„å¯äº¤äº’ç•Œé¢

ä¸ä¼ ç»Ÿ Web åº”ç”¨çš„å…³é”®åŒºåˆ«ï¼š

| ç‰¹æ€§         | ä¼ ç»Ÿ Web åº”ç”¨      | MCP App                    |
| ------------ | ------------------ | -------------------------- |
| **ä¸Šä¸‹æ–‡**   | ç‹¬ç«‹é¡µé¢ï¼Œè·³å‡ºå¯¹è¯ | åµŒå…¥å¯¹è¯æµï¼Œä¿æŒä¸Šä¸‹æ–‡     |
| **æ•°æ®æµ**   | éœ€è‡ªå»º APIã€è®¤è¯   | å¯ç›´æ¥è°ƒç”¨ MCP æœåŠ¡å™¨å·¥å…·  |
| **é›†æˆèƒ½åŠ›** | éœ€å•ç‹¬å®ç°å„ç§é›†æˆ | å¯å§”æ‰˜å®¿ä¸»è°ƒç”¨å·²è¿æ¥çš„èƒ½åŠ› |
| **å®‰å…¨éš”ç¦»** | å®Œå…¨ä¿¡ä»»æˆ–å®Œå…¨éš”ç¦» | iframe æ²™ç®± + CSP ç²¾ç»†æ§åˆ¶ |

### 2.2 ä¸‰å±‚æ¶æ„

MCP App çš„æ¶æ„åˆ†ä¸ºä¸‰å±‚ï¼š

```mermaid
flowchart TB
    subgraph Server["ğŸ–¥ï¸ MCP Server"]
        S1["registerAppTool(): æ³¨å†Œå¸¦ UI çš„å·¥å…·"]
        S2["registerAppResource(): æ³¨å†Œ UI èµ„æº"]
        S3["å¤„ç†å·¥å…·è°ƒç”¨ï¼Œè¿”å›ç»“æ„åŒ–æ•°æ®"]
    end
    
    subgraph Host["ğŸŒ Host (AppBridge)"]
        H1["è¿æ¥çœŸå® MCP æœåŠ¡å™¨"]
        H2["ç®¡ç† iframe æ²™ç®±"]
        H3["è½¬å‘è¯·æ±‚/å“åº”"]
        H4["å‘é€å·¥å…·è¾“å…¥/ç»“æœç»™ View"]
    end
    
    subgraph View["ğŸ“± View (App ç±»)"]
        V1["è¿è¡Œåœ¨ iframe ä¸­"]
        V2["æ¥æ”¶å·¥å…·è¾“å…¥å’Œç»“æœ"]
        V3["å¯è°ƒç”¨æœåŠ¡å™¨å·¥å…·"]
        V4["å¯å‘é€æ¶ˆæ¯åˆ°å¯¹è¯"]
    end
    
    Server -->|"MCP Protocol (JSON-RPC)"| Host
    Host -->|"postMessage (JSON-RPC)"| View
```

**ä¸‰å±‚èŒè´£**ï¼š

1. **Server å±‚**ï¼šMCP æœåŠ¡å™¨ï¼Œè´Ÿè´£æ³¨å†Œå·¥å…·ã€å¤„ç†ä¸šåŠ¡é€»è¾‘ã€è¿”å›æ•°æ®
2. **Host å±‚**ï¼šå®¿ä¸»åº”ç”¨ï¼ˆå¦‚ Claude Desktopï¼‰ï¼Œè´Ÿè´£è¿æ¥æœåŠ¡å™¨ã€ç®¡ç†æ²™ç®±ã€è½¬å‘æ¶ˆæ¯
3. **View å±‚**ï¼šUI ç»„ä»¶ï¼Œè¿è¡Œåœ¨ iframe ä¸­ï¼Œè´Ÿè´£æ¸²æŸ“ç•Œé¢ã€å¤„ç†ç”¨æˆ·äº¤äº’

### 2.3 ç”Ÿå‘½å‘¨æœŸ

ä¸€ä¸ª MCP App çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸå¦‚ä¸‹ï¼š

```mermaid
flowchart LR
    subgraph D["1ï¸âƒ£ Discovery"]
        D1["Host è·å–å·¥å…·åˆ—è¡¨"]
        D2["è¯†åˆ«å¸¦ _meta.ui.resourceUri çš„å·¥å…·"]
        D1 --> D2
    end
    
    subgraph I["2ï¸âƒ£ Initialize"]
        I1["Host æ¸²æŸ“ iframe"]
        I2["View å‘é€ ui/initialize"]
        I3["Host è¿”å›ä¸Šä¸‹æ–‡å’Œèƒ½åŠ›"]
        I1 --> I2 --> I3
    end
    
    subgraph DD["3ï¸âƒ£ Data Delivery"]
        DD1["Host å‘é€ tool-input"]
        DD2["Host å‘é€ tool-result"]
        DD1 --> DD2
    end
    
    subgraph Int["4ï¸âƒ£ Interactive"]
        Int1["ç”¨æˆ·ä¸ View äº¤äº’"]
        Int2["View è°ƒç”¨æœåŠ¡å™¨å·¥å…·"]
        Int3["View æ›´æ–°æ¨¡å‹ä¸Šä¸‹æ–‡"]
    end
    
    subgraph T["5ï¸âƒ£ Teardown"]
        T1["Host å‘é€ teardown"]
        T2["View æ¸…ç†èµ„æº"]
        T1 --> T2
    end
    
    D --> I --> DD --> Int --> T
```

### 2.4 URI æ–¹æ¡ˆä¸ MIME ç±»å‹

**UI Resource URI**ï¼š

```text
ui://server-name/resource-path.html
```

`ui://` æ˜¯ MCP App ä¸“ç”¨çš„ URI æ–¹æ¡ˆï¼Œå‘Šè¯‰å®¿ä¸»è¿™æ˜¯ä¸€ä¸ªéœ€è¦åœ¨ iframe ä¸­æ¸²æŸ“çš„ UI èµ„æºã€‚

**MIME Type**ï¼š

```text
text/html;profile=mcp-app
```

`profile=mcp-app` å‚æ•°ä¼ è¾¾äº†é¢å¤–çš„è¯­ä¹‰çº¦æŸâ€”â€”è¿™ä¸æ˜¯æ™®é€šçš„ HTML é¡µé¢ï¼Œè€Œæ˜¯ä¸€ä¸ªç¬¦åˆ MCP App åè®®çš„äº¤äº’å¼ç»„ä»¶ã€‚

---

## ç¬¬ä¸‰éƒ¨åˆ†ï¼šåè®®è§„èŒƒè¯¦è§£

### 3.1 åè®®ç‰ˆæœ¬

| ç‰ˆæœ¬           | çŠ¶æ€           | é“¾æ¥                                                                                                                              |
| -------------- | -------------- | --------------------------------------------------------------------------------------------------------------------------------- |
| **2026-01-26** | Stableï¼ˆç¨³å®šï¼‰ | [specification/2026-01-26/apps.mdx](https://github.com/modelcontextprotocol/ext-apps/blob/main/specification/2026-01-26/apps.mdx) |
| draft          | Development    | [specification/draft/apps.mdx](https://github.com/modelcontextprotocol/ext-apps/blob/main/specification/draft/apps.mdx)           |

### 3.2 å·¥å…·å…ƒæ•°æ® (Tool Metadata)

```typescript
interface McpUiToolMeta {
  ui?: {
    resourceUri: string; // æŒ‡å‘ UI èµ„æºçš„ URI
    visibility?: ('model' | 'app')[]; // å¯è§æ€§èŒƒå›´
  };
}
```

**visibility å­—æ®µè¯¦è§£**ï¼š

- `visibility: ["model"]` â€” ä»… LLM å¯è°ƒç”¨ï¼ˆé»˜è®¤ï¼‰
- `visibility: ["app"]` â€” ä»… View å¯è°ƒç”¨ï¼ŒLLM ä¸å¯è§
- `visibility: ["model", "app"]` â€” ä¸¤è€…å‡å¯è°ƒç”¨

è¿™ä¸ªè®¾è®¡å…è®¸ä½ åˆ›å»º"å†…éƒ¨å·¥å…·"â€”â€”åªæœ‰ UI å¯ä»¥è°ƒç”¨çš„è¾…åŠ©å·¥å…·ï¼Œå¯¹ LLM éšè—ã€‚

### 3.3 èµ„æºå…ƒæ•°æ® (Resource Metadata)

```typescript
interface McpUiResourceMeta {
  ui?: {
    csp?: McpUiResourceCsp; // å†…å®¹å®‰å…¨ç­–ç•¥
    permissions?: McpUiResourcePermissions; // è®¾å¤‡æƒé™
    domain?: string; // ä¸“ç”¨æ²™ç®±æ¥æº
    prefersBorder?: boolean; // æ˜¯å¦æ˜¾ç¤ºè¾¹æ¡†
  };
}
```

### 3.4 å†…å®¹å®‰å…¨ç­–ç•¥ (CSP)

CSP æ˜¯ MCP App å®‰å…¨æ¨¡å‹çš„æ ¸å¿ƒç»„ä»¶ï¼š

```typescript
interface McpUiResourceCsp {
  connectDomains?: string[]; // å…è®¸ fetch/XHR/WebSocket è¿æ¥çš„åŸŸ
  resourceDomains?: string[]; // å…è®¸åŠ è½½é™æ€èµ„æºçš„åŸŸï¼ˆè„šæœ¬ã€æ ·å¼ã€å›¾ç‰‡ï¼‰
  frameDomains?: string[]; // å…è®¸åµŒå¥— iframe çš„åŸŸ
  baseUriDomains?: string[]; // base-uri æŒ‡ä»¤
}
```

**é»˜è®¤è¡Œä¸º**ï¼šRestrictive by Defaultï¼ˆé»˜è®¤æ‹’ç»ï¼‰

å¦‚æœä¸å£°æ˜ä»»ä½• CSP åŸŸï¼ŒApp å°†æ— æ³•ï¼š

- å‘èµ·ä»»ä½•å¤–éƒ¨ç½‘ç»œè¯·æ±‚
- åŠ è½½ä»»ä½•å¤–éƒ¨è„šæœ¬æˆ–æ ·å¼
- åµŒå…¥ä»»ä½•å¤–éƒ¨ iframe

å¿…é¡»**æ˜¾å¼å£°æ˜**éœ€è¦è®¿é—®çš„å¤–éƒ¨åŸŸã€‚

### 3.5 è®¾å¤‡æƒé™

```typescript
interface McpUiResourcePermissions {
  camera?: {}; // æ‘„åƒå¤´
  microphone?: {}; // éº¦å…‹é£
  geolocation?: {}; // åœ°ç†ä½ç½®
  clipboardWrite?: {}; // å‰ªè´´æ¿å†™å…¥
}
```

è¿™äº›æƒé™æ˜ å°„åˆ° iframe çš„ `allow` å±æ€§ï¼Œå®¿ä¸»ä¼šæ®æ­¤æ„å»ºæ²™ç®±ã€‚

### 3.6 å®¿ä¸»ä¸Šä¸‹æ–‡ (Host Context)

å®¿ä¸»åœ¨åˆå§‹åŒ–æ—¶ä¼šå‘ View å‘é€ä¸Šä¸‹æ–‡ä¿¡æ¯ï¼š

```typescript
interface McpUiHostContext {
  theme?: 'light' | 'dark';
  locale?: string;
  timezone?: string;
  displayMode?: 'inline' | 'fullscreen' | 'pip';
  safeAreaInsets?: { top?: number; right?: number; bottom?: number; left?: number };
  containerSize?: { width: number; height: number };
  platform?: 'web' | 'desktop' | 'mobile';
  capabilities?: McpUiHostCapabilities;
  styles?: McpUiHostStyles; // 30+ CSS å˜é‡
}
```

### 3.7 æ ·å¼å˜é‡ç³»ç»Ÿ

MCP App å®šä¹‰äº†ä¸€å¥—å®Œæ•´çš„ CSS å˜é‡ç³»ç»Ÿï¼Œè®© App èƒ½å¤Ÿé€‚é…å®¿ä¸»ä¸»é¢˜ï¼š

```css
/* èƒŒæ™¯è‰² */
--color-background-primary
--color-background-secondary
--color-background-tertiary

/* æ–‡æœ¬è‰² */
--color-text-primary
--color-text-secondary
--color-text-tertiary
--color-text-quaternary

/* å¼ºè°ƒè‰² */
--color-accent-primary
--color-accent-secondary

/* è¾¹æ¡†è‰² */
--color-border-primary
--color-border-secondary
--color-border-tertiary

/* å­—ä½“ */
--font-sans
--font-mono

/* å­—é‡ */
--font-weight-normal
--font-weight-medium
--font-weight-semibold
--font-weight-bold
```

---

## ç¬¬å››éƒ¨åˆ†ï¼šSDK ä¸ API

### 4.1 NPM åŒ…ç»“æ„

```typescript
// ä¸» SDK - View ç«¯
import { App, PostMessageTransport } from '@modelcontextprotocol/ext-apps';

// React é›†æˆ
import { useApp, useHostStyleVariables, useAutoResize } from '@modelcontextprotocol/ext-apps/react';

// Host ç«¯
import {
  AppBridge,
  getToolUiResourceUri,
  buildAllowAttribute,
} from '@modelcontextprotocol/ext-apps/app-bridge';

// Server åŠ©æ‰‹
import {
  registerAppTool,
  registerAppResource,
  RESOURCE_MIME_TYPE,
} from '@modelcontextprotocol/ext-apps/server';
```

### 4.2 App ç±» API (View ç«¯)

`App` ç±»æ˜¯ View ç«¯çš„æ ¸å¿ƒï¼Œæä¾›ä¸å®¿ä¸»é€šä¿¡çš„å®Œæ•´èƒ½åŠ›ï¼š

```typescript
class App extends Protocol {
  // è¿æ¥å’Œç”Ÿå‘½å‘¨æœŸ
  connect(transport: Transport): Promise<void>;
  getHostContext(): McpUiHostContext | undefined;
  close(): Promise<void>;

  // ä¸æœåŠ¡å™¨äº¤äº’
  callServerTool(request: CallToolRequest): Promise<CallToolResult>;
  readServerResource(request: ReadResourceRequest): Promise<ReadResourceResult>;

  // ä¸å®¿ä¸»äº¤äº’
  sendMessage(message: Message): Promise<{ isError: boolean }>;
  updateModelContext(context: McpUiUpdateModelContextRequest): Promise<void>;
  openLink(request: McpUiOpenLinkRequest): Promise<{ isError: boolean }>;
  requestDisplayMode(request: McpUiRequestDisplayModeRequest): Promise<void>;
  sendLog(log: { level: string; data: any }): Promise<void>;

  // ç”Ÿå‘½å‘¨æœŸå¤„ç†å™¨
  ontoolinput?: (input: McpUiToolInputNotification) => void;
  ontoolresult?: (result: McpUiToolResultNotification) => void;
  ontoolcancelled?: (params: { reason?: string }) => void;
  onhostcontextchanged?: (context: McpUiHostContext) => void;
  onteardown?: () => Promise<any>;
}
```

### 4.3 AppBridge ç±» API (Host ç«¯)

`AppBridge` æ˜¯å®¿ä¸»ç«¯çš„æ¡¥æ¥ç±»ï¼Œç®¡ç†ä¸ iframe ä¸­ App çš„é€šä¿¡ï¼š

```typescript
class AppBridge extends Protocol {
  connect(transport: Transport): Promise<void>;

  // å‘é€å·¥å…·æ•°æ®ç»™ View
  sendToolInput(toolInput: McpUiToolInputNotification): Promise<void>;
  sendToolInputPartial(toolInputPartial: McpUiToolInputPartialNotification): Promise<void>;
  sendToolResult(toolResult: McpUiToolResultNotification): Promise<void>;
  sendToolCancelled(toolCancelled: McpUiToolCancelledNotification): Promise<void>;

  // å®¿ä¸»ä¸Šä¸‹æ–‡ç®¡ç†
  setHostContext(context: McpUiHostContext): Promise<void>;
  updateHostContext(context: Partial<McpUiHostContext>): Promise<void>;

  teardownResource(): Promise<void>;
}

// è¾…åŠ©å‡½æ•°
function getToolUiResourceUri(tool: Partial<Tool>): string | undefined;
function buildAllowAttribute(permissions: McpUiResourcePermissions | undefined): string;
```

### 4.4 Server åŠ©æ‰‹å‡½æ•°

```typescript
function registerAppTool(
  server: McpServer,
  name: string,
  config: McpUiAppToolConfig,
  callback: ToolCallback
): RegisteredTool;

function registerAppResource(
  server: McpServer,
  name: string,
  uri: string,
  meta: ResourceMetadata,
  callback: ReadResourceCallback
): RegisteredResource;
```

### 4.5 React Hooks

```typescript
// æ ¸å¿ƒ Hook - ç®¡ç† App è¿æ¥å’ŒçŠ¶æ€
function useApp(options: UseAppOptions): {
  app: App | null;
  toolInput: McpUiToolInputNotification | null;
  toolResult: McpUiToolResultNotification | null;
  hostContext: McpUiHostContext | undefined;
};

// æ ·å¼åŒæ­¥ - å°†å®¿ä¸» CSS å˜é‡æ³¨å…¥åˆ°æ–‡æ¡£
function useHostStyleVariables(app: App | null, initialContext?: McpUiHostContext): void;

// ä¸»é¢˜åŒæ­¥ - è®¾ç½® data-theme å±æ€§
function useDocumentTheme(app: App | null, initialContext?: McpUiHostContext): void;

// è‡ªåŠ¨è°ƒæ•´å¤§å° - é€šçŸ¥å®¿ä¸» View å°ºå¯¸å˜åŒ–
function useAutoResize(app: App | null, autoResize?: boolean): void;
```

---

## ç¬¬äº”éƒ¨åˆ†ï¼šé€šä¿¡åè®®è¯¦è§£

### 5.1 ä¼ è¾“å±‚

MCP App ä½¿ç”¨ `PostMessageTransport`ï¼ŒåŸºäº `window.postMessage` å®ç° JSON-RPC 2.0 åè®®ã€‚

```typescript
const transport = new PostMessageTransport({
  targetOrigin: '*', // æˆ–æŒ‡å®šå…·ä½“çš„å®¿ä¸» origin
});
await app.connect(transport);
```

### 5.2 è¯·æ±‚ç±»å‹

| æ–¹æ³•                      | æ–¹å‘        | ç”¨é€”           |
| ------------------------- | ----------- | -------------- |
| `ui/initialize`           | View â†’ Host | åˆå§‹åŒ–æ¡æ‰‹     |
| `ui/message`              | View â†’ Host | å‘é€æ¶ˆæ¯åˆ°å¯¹è¯ |
| `ui/update-model-context` | View â†’ Host | æ›´æ–°æ¨¡å‹ä¸Šä¸‹æ–‡ |
| `ui/open-link`            | View â†’ Host | æ‰“å¼€å¤–éƒ¨é“¾æ¥   |
| `ui/request-display-mode` | View â†’ Host | è¯·æ±‚æ˜¾ç¤ºæ¨¡å¼   |
| `ui/resource-teardown`    | Host â†’ View | èµ„æºæ¸…ç†       |
| `tools/call`              | View â†’ Host | è°ƒç”¨æœåŠ¡å™¨å·¥å…· |
| `tools/list`              | View â†’ Host | åˆ—å‡ºå¯ç”¨å·¥å…·   |
| `resources/read`          | View â†’ Host | è¯»å–èµ„æº       |

### 5.3 é€šçŸ¥ç±»å‹

| æ–¹æ³•                                    | æ–¹å‘        | ç”¨é€”                 |
| --------------------------------------- | ----------- | -------------------- |
| `ui/notifications/initialized`          | View â†’ Host | åˆå§‹åŒ–å®Œæˆ           |
| `ui/notifications/size-changed`         | View â†’ Host | å°ºå¯¸å˜åŒ–             |
| `ui/notifications/tool-input`           | Host â†’ View | å·¥å…·è¾“å…¥æ•°æ®         |
| `ui/notifications/tool-input/partial`   | Host â†’ View | æµå¼è¾“å…¥ï¼ˆéƒ¨åˆ†æ•°æ®ï¼‰ |
| `ui/notifications/tool-result`          | Host â†’ View | å·¥å…·ç»“æœ             |
| `ui/notifications/tool-cancelled`       | Host â†’ View | å·¥å…·å·²å–æ¶ˆ           |
| `ui/notifications/host-context-changed` | Host â†’ View | å®¿ä¸»ä¸Šä¸‹æ–‡å˜åŒ–       |

### 5.4 å®Œæ•´é€šä¿¡åºåˆ—å›¾

```mermaid
sequenceDiagram
    participant V as View (iframe)
    participant H as Host (AppBridge)
    participant S as MCP Server

    rect rgb(40, 35, 30)
        Note over V,H: åˆå§‹åŒ–é˜¶æ®µ
        H->>V: render iframe
        V->>H: ui/initialize
        H-->>V: {context, capabilities}
        V->>H: ui/notifications/initialized
    end

    rect rgb(35, 40, 35)
        Note over V,S: æ•°æ®äº¤ä»˜é˜¶æ®µ
        S->>H: tool call
        H->>V: tool-input notification
        S->>H: tool result
        H->>V: tool-result notification
    end

    rect rgb(35, 35, 40)
        Note over V,S: äº¤äº’é˜¶æ®µ
        V->>H: tools/call
        H->>S: tools/call
        S-->>H: result
        H-->>V: result
    end

    rect rgb(40, 30, 30)
        Note over V,H: æ¸…ç†é˜¶æ®µ
        H->>V: ui/resource-teardown
        V-->>H: acknowledgment
    end
```

---

## ç¬¬å…­éƒ¨åˆ†ï¼šå®‰å…¨æ¨¡å‹

### 6.1 å¤šå±‚é˜²æŠ¤

MCP App é‡‡ç”¨**çºµæ·±é˜²å¾¡**ç­–ç•¥ï¼ŒåŒ…å«å¤šå±‚å®‰å…¨æœºåˆ¶ï¼š

1. **iframe æ²™ç®±**ï¼šæ‰€æœ‰ UI å†…å®¹è¿è¡Œåœ¨æ²™ç®± iframe ä¸­
2. **é¢„å£°æ˜æ¨¡æ¿**ï¼šå®¿ä¸»å¯åœ¨æ‰§è¡Œå‰å®¡æŸ¥ HTML å†…å®¹
3. **å¯å®¡è®¡æ¶ˆæ¯**ï¼šæ‰€æœ‰ UI-Host é€šä¿¡åŸºäº JSON-RPCï¼Œå¯è®°å½•å’Œå®¡è®¡
4. **ç”¨æˆ·åŒæ„**ï¼šView å‘èµ·çš„å·¥å…·è°ƒç”¨å¯è¦æ±‚ç”¨æˆ·ç¡®è®¤
5. **CSP æ§åˆ¶**ï¼šç»†ç²’åº¦çš„å¤–éƒ¨åŸŸè®¿é—®æ§åˆ¶

### 6.2 iframe æ²™ç®±å±æ€§

```typescript
function buildAllowAttribute(permissions?: McpUiResourcePermissions): string {
  const allows = [
    'allow-scripts', // å…è®¸æ‰§è¡Œè„šæœ¬
    'allow-forms', // å…è®¸æäº¤è¡¨å•
    'allow-same-origin', // å…è®¸åŒæºè®¿é—®ï¼ˆpostMessage å¿…éœ€ï¼‰
  ];

  // æ ¹æ®å£°æ˜çš„æƒé™åŠ¨æ€æ·»åŠ 
  if (permissions?.camera) allows.push('camera');
  if (permissions?.microphone) allows.push('microphone');
  if (permissions?.geolocation) allows.push('geolocation');
  if (permissions?.clipboardWrite) allows.push('clipboard-write');

  return allows.join('; ');
}
```

**æ³¨æ„**ï¼š`allow-same-origin` æ˜¯ postMessage é€šä¿¡çš„å¿…è¦æ¡ä»¶ï¼Œä½†ä¸ä¼šæˆäºˆ App è®¿é—®çˆ¶çª—å£ DOM çš„èƒ½åŠ›ã€‚

### 6.3 åŒå±‚ iframe æ¶æ„ï¼ˆæ¨èï¼‰

ä¸ºäº†è¿›ä¸€æ­¥å¢å¼ºå®‰å…¨æ€§ï¼Œè§„èŒƒå»ºè®®ä½¿ç”¨**åŒå±‚ iframe æ¶æ„**ï¼š

```mermaid
flowchart TB
    HW["ğŸªŸ Host Window"]
    SI["ğŸ›¡ï¸ Sandbox iframe<br/>(éªŒè¯æ¥æº)"]
    RI["ğŸ“± Resource iframe<br/>(è¿è¡Œ App)"]
    
    HW --> SI
    SI --> RI
```

- **å¤–å±‚ iframe**ï¼šä½œä¸ºå®‰å…¨ä»£ç†ï¼ŒéªŒè¯å†…å±‚æ¶ˆæ¯çš„æ¥æº
- **å†…å±‚ iframe**ï¼šå®é™…è¿è¡Œ App

è¿™ç§æ¶æ„å¯ä»¥é˜²æ­¢æ¶æ„ App ä¼ªé€ æ¶ˆæ¯æ¥æºã€‚

---

## ç¬¬ä¸ƒéƒ¨åˆ†ï¼šæ˜¾ç¤ºæ¨¡å¼

### 7.1 ä¸‰ç§æ¨¡å¼

| æ¨¡å¼         | è¯´æ˜       | é€‚ç”¨åœºæ™¯             |
| ------------ | ---------- | -------------------- |
| `inline`     | åµŒå…¥å¯¹è¯æµ | é»˜è®¤æ¨¡å¼ï¼Œå°å‹ç»„ä»¶   |
| `fullscreen` | å…¨å±è¦†ç›–   | å¤æ‚äº¤äº’ã€æ²‰æµ¸å¼ä½“éªŒ |
| `pip`        | ç”»ä¸­ç”»     | æŒç»­ç›‘æ§ã€è§†é¢‘æ’­æ”¾   |

### 7.2 æ¨¡å¼åˆ‡æ¢

```typescript
// View è¯·æ±‚åˆ‡æ¢åˆ°å…¨å±æ¨¡å¼
await app.requestDisplayMode({ mode: 'fullscreen' });

// ç›‘å¬æ¨¡å¼å˜åŒ–
app.onhostcontextchanged = context => {
  if (context.displayMode) {
    console.log('Display mode changed to:', context.displayMode);
    // æ ¹æ®æ¨¡å¼è°ƒæ•´å¸ƒå±€
  }
};
```

### 7.3 å“åº”å¼è®¾è®¡è¦ç‚¹

```typescript
// ä½¿ç”¨ containerSize é€‚åº”å®¹å™¨
const { width, height } = hostContext.containerSize ?? {};

// å¤„ç†åˆ˜æµ·å±ç­‰å®‰å…¨åŒºåŸŸ
const { top, right, bottom, left } = hostContext.safeAreaInsets ?? {};

// æ ¹æ®å¹³å°è°ƒæ•´è§¦æ§äº¤äº’
if (hostContext.platform === 'mobile') {
  // å¢å¤§ç‚¹å‡»ç›®æ ‡ã€ä¼˜åŒ–æ‰‹åŠ¿
}
```

---

## ç¬¬å…«éƒ¨åˆ†ï¼šå®æˆ˜å¼€å‘æŒ‡å—

### 8.1 é¡¹ç›®ç»“æ„ï¼ˆæ¨èï¼‰

```
my-mcp-app/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ server/
â”‚   â”‚   â””â”€â”€ index.ts        # MCP æœåŠ¡å™¨
â”‚   â””â”€â”€ view/
â”‚       â”œâ”€â”€ index.html      # View å…¥å£
â”‚       â”œâ”€â”€ app.tsx         # React ç»„ä»¶
â”‚       â””â”€â”€ styles.css      # æ ·å¼
â”œâ”€â”€ dist/                   # æ„å»ºè¾“å‡º
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ vite.config.ts
```

### 8.2 æœ€å°ç¤ºä¾‹ - æœåŠ¡å™¨ç«¯

```typescript
import { McpServer } from '@modelcontextprotocol/sdk/server/mcp.js';
import {
  registerAppTool,
  registerAppResource,
  RESOURCE_MIME_TYPE,
} from '@modelcontextprotocol/ext-apps/server';
import { readFileSync } from 'fs';

const server = new McpServer({
  name: 'my-app',
  version: '1.0.0',
});

const resourceUri = 'ui://my-app/dashboard.html';

// æ³¨å†Œå¸¦ UI çš„å·¥å…·
registerAppTool(
  server,
  'show-dashboard',
  {
    title: 'Show Dashboard',
    description: 'æ˜¾ç¤ºäº¤äº’å¼ä»ªè¡¨ç›˜',
    inputSchema: {
      type: 'object',
      properties: {
        data: { type: 'array', description: 'è¦å±•ç¤ºçš„æ•°æ®' },
      },
    },
    _meta: {
      ui: { resourceUri },
    },
  },
  async args => {
    // å·¥å…·é€»è¾‘ - è¿”å›çš„æ•°æ®ä¼šé€šè¿‡ tool-result å‘é€ç»™ View
    return {
      content: [{ type: 'text', text: 'Dashboard ready' }],
      structuredContent: { chartData: args.data },
    };
  }
);

// æ³¨å†Œ UI èµ„æº
registerAppResource(
  server,
  'dashboard',
  resourceUri,
  { mimeType: RESOURCE_MIME_TYPE },
  async () => {
    const html = readFileSync('./dist/dashboard.html', 'utf-8');
    return {
      contents: [{ uri: resourceUri, text: html }],
    };
  }
);
```

### 8.3 æœ€å°ç¤ºä¾‹ - View ç«¯ (Vanilla JS)

```html
<!DOCTYPE html>
<html>
  <head>
    <script type="module">
      import { App, PostMessageTransport } from '@modelcontextprotocol/ext-apps';

      const app = new App({ name: 'my-view', version: '1.0.0' });
      const transport = new PostMessageTransport();

      // å¤„ç†å·¥å…·è¾“å…¥ï¼ˆå·¥å…·è¢«è°ƒç”¨æ—¶çš„å‚æ•°ï¼‰
      app.ontoolinput = input => {
        console.log('Tool input:', input);
      };

      // å¤„ç†å·¥å…·ç»“æœï¼ˆå·¥å…·æ‰§è¡Œå®Œæˆåçš„æ•°æ®ï¼‰
      app.ontoolresult = result => {
        const data = result.structuredContent?.chartData;
        document.getElementById('result').textContent = JSON.stringify(data, null, 2);
      };

      await app.connect(transport);
    </script>
  </head>
  <body>
    <div id="result">Loading...</div>
  </body>
</html>
```

### 8.4 æœ€å°ç¤ºä¾‹ - View ç«¯ (React)

```tsx
import { useApp, useHostStyleVariables } from '@modelcontextprotocol/ext-apps/react';

export default function Dashboard() {
  const { app, toolInput, toolResult, hostContext } = useApp({
    name: 'my-view',
    version: '1.0.0',
  });

  // è‡ªåŠ¨åº”ç”¨å®¿ä¸»ä¸»é¢˜çš„ CSS å˜é‡
  useHostStyleVariables(app, hostContext);

  // ä¸»åŠ¨è°ƒç”¨æœåŠ¡å™¨å·¥å…·
  const handleRefresh = async () => {
    const result = await app?.callServerTool({
      name: 'get-data',
      arguments: { filter: 'recent' },
    });
    console.log('Fresh data:', result);
  };

  return (
    <div
      style={{
        background: 'var(--color-background-primary)',
        color: 'var(--color-text-primary)',
      }}
    >
      <h1>Dashboard</h1>
      <button onClick={handleRefresh}>Refresh Data</button>
      <pre>{JSON.stringify(toolResult?.structuredContent, null, 2)}</pre>
    </div>
  );
}
```

### 8.5 æ„å»ºé…ç½® (Vite)

```typescript
// vite.config.ts
import { defineConfig } from 'vite';
import react from '@vitejs/plugin-react';
import { viteSingleFile } from 'vite-plugin-singlefile';

export default defineConfig({
  plugins: [react(), viteSingleFile()],
  build: {
    outDir: 'dist',
    rollupOptions: {
      input: process.env.INPUT || 'src/view/index.html',
    },
  },
});
```

`viteSingleFile` æ’ä»¶ä¼šå°†æ‰€æœ‰èµ„æºå†…è”åˆ°å•ä¸ª HTML æ–‡ä»¶ä¸­ï¼Œè¿™æ˜¯ MCP App çš„æ¨èåšæ³•â€”â€”ç®€åŒ–åˆ†å‘ï¼Œé¿å…å¤–éƒ¨ä¾èµ–ã€‚

---

## ç¬¬ä¹éƒ¨åˆ†ï¼šé«˜çº§æ¨¡å¼

### 9.1 App-Only å·¥å…·

åˆ›å»ºä»… UI å¯è°ƒç”¨çš„"å†…éƒ¨å·¥å…·"ï¼š

```typescript
registerAppTool(
  server,
  'internal-fetch',
  {
    description: 'Internal data fetching (UI only)',
    inputSchema: {
      type: 'object',
      properties: {
        endpoint: { type: 'string' },
      },
    },
    _meta: {
      ui: {
        resourceUri: 'ui://app/view.html',
        visibility: ['app'], // å…³é”®ï¼šä»… app å¯è§ï¼ŒLLM ä¸å¯è°ƒç”¨
      },
    },
  },
  async args => {
    const data = await fetchInternal(args.endpoint);
    return { content: [{ type: 'text', text: JSON.stringify(data) }] };
  }
);
```

### 9.2 å¤§æ•°æ®åˆ†å—åŠ è½½

```typescript
// æœåŠ¡å™¨ç«¯ - æ”¯æŒåˆ†é¡µ
registerAppTool(
  server,
  'load-data',
  {
    inputSchema: {
      type: 'object',
      properties: {
        offset: { type: 'number', default: 0 },
        limit: { type: 'number', default: 100 },
      },
    },
    _meta: { ui: { resourceUri, visibility: ['app'] } },
  },
  async args => {
    const { offset = 0, limit = 100 } = args;
    const data = await fetchData(offset, limit);
    return {
      content: [{ type: 'text', text: `Loaded ${data.length} items` }],
      structuredContent: {
        items: data,
        hasMore: data.length === limit,
        nextOffset: offset + data.length,
      },
    };
  }
);

// View ç«¯ - å¢é‡åŠ è½½
const loadMore = async () => {
  const result = await app.callServerTool({
    name: 'load-data',
    arguments: { offset: items.length, limit: 100 },
  });
  const { items: newItems, hasMore } = result.structuredContent;
  setItems(prev => [...prev, ...newItems]);
  setHasMore(hasMore);
};
```

### 9.3 æ›´æ–°æ¨¡å‹ä¸Šä¸‹æ–‡

è®© LLM çŸ¥é“ç”¨æˆ·åœ¨ UI ä¸­åšäº†ä»€ä¹ˆï¼š

```typescript
// ç”¨æˆ·åœ¨ UI ä¸­é€‰æ‹©äº†æŸä¸ªé€‰é¡¹
const handleSelection = async selectedItem => {
  // æ›´æ–°æ¨¡å‹ä¸Šä¸‹æ–‡ï¼Œè®© LLM çŸ¥é“ç”¨æˆ·çš„é€‰æ‹©
  await app.updateModelContext({
    content: [
      {
        type: 'text',
        text: `ç”¨æˆ·åœ¨ä»ªè¡¨ç›˜ä¸­é€‰æ‹©äº†: ${selectedItem.name} (ID: ${selectedItem.id})`,
      },
    ],
  });
};
```

è¿™æ ·ï¼Œå½“ç”¨æˆ·æ¥ä¸‹æ¥é—®"å¸®æˆ‘åˆ†æåˆšæ‰é€‰çš„é‚£ä¸ª"æ—¶ï¼ŒLLM å°±çŸ¥é“æ˜¯ä»€ä¹ˆã€‚

### 9.4 æµå¼å·¥å…·è¾“å…¥

å½“å·¥å…·è¾“å…¥æ•°æ®è¾ƒå¤§æ—¶ï¼Œå®¿ä¸»å¯ä»¥åˆ†å—å‘é€ï¼š

```typescript
// View ç«¯ - å¤„ç†éƒ¨åˆ†è¾“å…¥
app.ontoolinputpartial = partial => {
  // æ˜¾ç¤ºåŠ è½½è¿›åº¦
  setLoadingText(partial.input?.partialText || 'Loading...');
};

app.ontoolinput = input => {
  // å®Œæ•´è¾“å…¥åˆ°è¾¾
  setLoadingText(null);
  processInput(input);
};
```

### 9.5 ä¸»é¢˜åŒæ­¥

```typescript
// è‡ªåŠ¨åº”ç”¨å®¿ä¸»ä¸»é¢˜
app.onhostcontextchanged = context => {
  // è®¾ç½® data-theme å±æ€§
  document.documentElement.dataset.theme = context.theme;

  // åº”ç”¨ CSS å˜é‡
  if (context.styles) {
    for (const [key, value] of Object.entries(context.styles)) {
      document.documentElement.style.setProperty(key, value);
    }
  }
};
```

---

## ç¬¬åéƒ¨åˆ†ï¼šä¸ OpenAI Apps SDK å¯¹æ¯”

### 10.1 å…³ç³»è¯´æ˜

- **ext-appsï¼ˆMCP Appsï¼‰**ï¼šMCP å®˜æ–¹è§„èŒƒ + SDKï¼Œè·¨å¹³å°æ ‡å‡†
- **OpenAI Apps SDK**ï¼šChatGPT ç‰¹å®šå®ç°ï¼ŒåŸºäº MCP Apps è§„èŒƒ

ä¸¤è€…**ä¸æ˜¯ç«äº‰å…³ç³»**ï¼Œè€Œæ˜¯**è§„èŒƒä¸å®ç°**çš„å…³ç³»ã€‚OpenAI Apps SDK æ˜¯ MCP Apps è§„èŒƒåœ¨ ChatGPT å¹³å°ä¸Šçš„å®˜æ–¹å®ç°ã€‚

### 10.2 ä¸»è¦å·®å¼‚

| æ–¹é¢           | ext-apps (MCP Apps) | OpenAI Apps SDK                   |
| -------------- | ------------------- | --------------------------------- |
| **å®šä½**       | åè®®è§„èŒƒ + é€šç”¨ SDK | ChatGPT ç‰¹å®šæ¡†æ¶                  |
| **å…ƒæ•°æ®å‰ç¼€** | æ— ç‰¹å®šå‰ç¼€          | `openai/*`                        |
| **çŠ¶æ€ç®¡ç†**   | ç”± App è‡ªè¡Œå®ç°     | `widgetSessionId` + `widgetState` |
| **ä¼ è¾“æ–¹å¼**   | stdio, SSE, HTTP    | ä¸»è¦ SSE                          |
| **UI åº“**      | ä»»æ„                | `@openai/apps-sdk-ui`             |
| **è®¤è¯**       | é€šè¿‡ MCP æ ‡å‡†       | OAuth RFC 9728                    |

### 10.3 è¿ç§»æŒ‡å—

ä» OpenAI Apps SDK è¿ç§»åˆ° MCP Appsï¼š

```typescript
// OpenAI Apps SDK
const meta = {
  'openai/outputTemplate': 'ui://widget/view.html',
  'openai/widgetSessionId': sessionId,
  'openai/widgetState': { count: 0 },
};

// MCP Apps (ext-apps)
const meta = {
  ui: { resourceUri: 'ui://widget/view.html' },
};
// çŠ¶æ€ç®¡ç†é€šè¿‡ updateModelContext æˆ–è‡ªå®šä¹‰å·¥å…·å®ç°
```

### 10.4 OpenAI ç‰¹æœ‰åŠŸèƒ½

OpenAI Apps SDK æä¾›äº†ä¸€äº› ChatGPT ç‰¹å®šçš„ APIï¼š

```typescript
// ä» Widget è°ƒç”¨å·¥å…·
window.openai.callTool({ name: "search", arguments: {...} })

// å‘é€åç»­æ¶ˆæ¯ï¼ˆè§¦å‘æ–°çš„ LLM å“åº”ï¼‰
window.openai.sendFollowUpMessage("ç»§ç»­åˆ†æ...")

// æ‰“å¼€æ¨¡æ€æ¡†
window.openai.requestModal({ ... })

// widgetState è‡ªåŠ¨æŒä¹…åŒ–åˆ°ä¼šè¯
```

---

## ç¬¬åä¸€éƒ¨åˆ†ï¼šå®¢æˆ·ç«¯æ”¯æŒ

### 11.1 å·²æ”¯æŒçš„å®¢æˆ·ç«¯

| å®¢æˆ·ç«¯                     | çŠ¶æ€      | å¤‡æ³¨                   |
| -------------------------- | --------- | ---------------------- |
| **Claude (Web & Desktop)** | âœ… å·²æ”¯æŒ | é¦–æ‰¹æ”¯æŒï¼Œå®Œæ•´å®ç°     |
| **ChatGPT**                | âœ… å·²æ”¯æŒ | 2026-01-26 å‘å¸ƒå‘¨ä¸Šçº¿  |
| **Goose**                  | âœ… å·²æ”¯æŒ | Block å¼€æºé¡¹ç›®         |
| **VS Code Insiders**       | âœ… å·²æ”¯æŒ | GitHub Copilot é›†æˆ    |
| **Postman**                | âœ… å·²æ”¯æŒ | API æµ‹è¯•å·¥å…·           |
| **MCPJam**                 | âœ… å·²æ”¯æŒ | ç¤¾åŒºå®¢æˆ·ç«¯             |
| **JetBrains IDEs**         | ğŸš§ å¼€å‘ä¸­ | å·²è¡¨è¾¾æ”¯æŒæ„å‘         |
| **AWS (Bedrock)**          | ğŸš§ å¼€å‘ä¸­ | å·²è¡¨è¾¾æ”¯æŒæ„å‘         |
| **Google DeepMind**        | ğŸš§ å¼€å‘ä¸­ | Antigravity å›¢é˜Ÿæ¢ç´¢ä¸­ |

### 11.2 é…ç½®ç¤ºä¾‹ (Claude Desktop)

```json
{
  "mcpServers": {
    "my-app": {
      "command": "node",
      "args": ["path/to/server.js"]
    }
  }
}
```

### 11.3 é…ç½®ç¤ºä¾‹ (VS Code)

```json
{
  "mcpServers": {
    "my-app": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-my-app", "--stdio"]
    }
  }
}
```

---

## ç¬¬åäºŒéƒ¨åˆ†ï¼šç¤ºä¾‹é¡¹ç›®é€Ÿè§ˆ

### 12.1 ext-apps å®˜æ–¹ç¤ºä¾‹

| ç±»åˆ«          | ç¤ºä¾‹                         | æŠ€æœ¯æ ˆ     | æ¼”ç¤ºåŠŸèƒ½        |
| ------------- | ---------------------------- | ---------- | --------------- |
| **åŸºç¡€æ¨¡æ¿**  | basic-server-react           | React      | åŸºç¡€ Hooks ä½¿ç”¨ |
|               | basic-server-vue             | Vue 3      | ç»„åˆå¼ API      |
|               | basic-server-svelte          | Svelte     | å“åº”å¼ç¼–ç¨‹      |
|               | basic-server-vanillajs       | Vanilla JS | æ— æ¡†æ¶å®ç°      |
| **3D/å¯è§†åŒ–** | map-server                   | CesiumJS   | 3D åœ°çƒ         |
|               | threejs-server               | Three.js   | 3D åœºæ™¯         |
|               | shadertoy-server             | GLSL       | å®æ—¶ç€è‰²å™¨      |
| **æ–‡æ¡£åª’ä½“**  | pdf-server                   | PDF.js     | PDF åˆ†å—åŠ è½½    |
|               | video-resource-server        | -          | äºŒè¿›åˆ¶è§†é¢‘      |
|               | sheet-music-server           | abc2svg    | ä¹è°±æ¸²æŸ“        |
| **æ•°æ®åˆ†æ**  | cohort-heatmap-server        | ECharts    | ç•™å­˜çƒ­åŠ›å›¾      |
|               | customer-segmentation-server | -          | èšç±»æ•£ç‚¹å›¾      |
|               | wiki-explorer-server         | Cytoscape  | çŸ¥è¯†å›¾è°±        |
| **å•†ä¸šåº”ç”¨**  | scenario-modeler-server      | -          | SaaS è´¢åŠ¡é¢„æµ‹   |
|               | budget-allocator-server      | -          | é¢„ç®—åˆ†é…        |
| **å·¥å…·**      | system-monitor-server        | -          | å®æ—¶ç³»ç»Ÿç›‘æ§    |
|               | transcript-server            | WebAPI     | è¯­éŸ³è½¬å½•        |
|               | qr-server (Python)           | -          | äºŒç»´ç ç”Ÿæˆ      |

### 12.2 è¿è¡Œç¤ºä¾‹

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/modelcontextprotocol/ext-apps.git
cd ext-apps

# å®‰è£…ä¾èµ–
npm install

# å¯åŠ¨æ‰€æœ‰ç¤ºä¾‹ï¼ˆä½¿ç”¨ basic-hostï¼‰
npm start

# è®¿é—® http://localhost:8080/
```

---

## ç¬¬åä¸‰éƒ¨åˆ†ï¼šæµ‹è¯•ä¸è°ƒè¯•

### 13.1 æœ¬åœ°æµ‹è¯•

ä½¿ç”¨ `basic-host` æµ‹è¯•ä½ çš„ MCP Appï¼š

```bash
# å¯åŠ¨ basic-host
cd ext-apps/examples/basic-host
npm install && npm start

# åœ¨å¦ä¸€ä¸ªç»ˆç«¯å¯åŠ¨ä½ çš„æœåŠ¡å™¨
cd your-app && npm run serve

# é…ç½® basic-host è¿æ¥ä½ çš„æœåŠ¡å™¨
SERVERS='["http://localhost:3001"]' npm start
```

### 13.2 ä½¿ç”¨ Claude æµ‹è¯•

```bash
# ä½¿ç”¨ cloudflared æš´éœ²æœ¬åœ°æœåŠ¡å™¨
npx cloudflared tunnel --url http://localhost:3001

# å¤åˆ¶ç”Ÿæˆçš„ URLï¼ˆå¦‚ https://xxx.trycloudflare.comï¼‰
# åœ¨ Claude è®¾ç½®ä¸­æ·»åŠ ä¸º Custom Connector
```

### 13.3 å¸¸è§é—®é¢˜æ’æŸ¥

| é—®é¢˜             | å¯èƒ½åŸå›          | è§£å†³æ–¹æ¡ˆ                                |
| ---------------- | ---------------- | --------------------------------------- |
| å¤–éƒ¨è¯·æ±‚è¢«é˜»æ­¢   | CSP æœªå£°æ˜åŸŸ     | åœ¨ `_meta.ui.csp.connectDomains` æ·»åŠ åŸŸ |
| postMessage å¤±è´¥ | æ²™ç®±é…ç½®é”™è¯¯     | ç¡®ä¿ `allow-same-origin` å­˜åœ¨           |
| ä¸»é¢˜ä¸åŒæ­¥       | æœªç›‘å¬ä¸Šä¸‹æ–‡å˜åŒ– | å®ç° `onhostcontextchanged` å¤„ç†å™¨      |
| å·¥å…·è°ƒç”¨è¶…æ—¶     | æœåŠ¡å™¨å“åº”æ…¢     | æ£€æŸ¥æœåŠ¡å™¨æ—¥å¿—ï¼Œä¼˜åŒ–å¤„ç†é€»è¾‘            |
| UI ä¸æ˜¾ç¤º        | èµ„æºåŠ è½½å¤±è´¥     | æ£€æŸ¥ resourceUri æ˜¯å¦æ­£ç¡®               |

---

## ç¬¬åå››éƒ¨åˆ†ï¼šæœ€ä½³å®è·µ

### 14.1 åº”è¯¥åšçš„ âœ…

- **ä½¿ç”¨ CSS å˜é‡å®ç°ä¸»é¢˜é€‚é…**ï¼šè®©ä½ çš„ App åœ¨æ˜æš—ä¸»é¢˜ä¸‹éƒ½æœ‰è‰¯å¥½è¡¨ç°
- **å“åº” displayMode å˜åŒ–**ï¼šæ ¹æ® inline/fullscreen/pip è°ƒæ•´å¸ƒå±€
- **æä¾›æ–‡æœ¬ fallback**ï¼šæ”¯æŒä¸æ”¯æŒ MCP App çš„å®¢æˆ·ç«¯
- **ä½¿ç”¨ TypeScript**ï¼šç¡®ä¿ç±»å‹å®‰å…¨ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯
- **åˆ†å—åŠ è½½å¤§æ•°æ®é›†**ï¼šé¿å…ä¸€æ¬¡æ€§ä¼ è¾“è¿‡å¤šæ•°æ®
- **æ˜¾å¼å£°æ˜æ‰€éœ€çš„ CSP åŸŸ**ï¼šæœ€å°æƒé™åŸåˆ™
- **å®ç° teardown æ¸…ç†**ï¼šé‡Šæ”¾èµ„æºã€å–æ¶ˆè®¢é˜…

### 14.2 ä¸åº”è¯¥åšçš„ âŒ

- **åœ¨ View ä¸­å­˜å‚¨æ•æ„Ÿæ•°æ®**ï¼šiframe å¯èƒ½è¢«å…¶ä»–è„šæœ¬è®¿é—®
- **å‡è®¾å›ºå®šçš„å®¹å™¨å°ºå¯¸**ï¼šä½¿ç”¨å“åº”å¼è®¾è®¡
- **å¿½ç•¥ teardown äº‹ä»¶**ï¼šå¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼
- **ä½¿ç”¨ `*` é€šé…ç¬¦ CSP åŸŸ**ï¼šå®‰å…¨é£é™©
- **é˜»å¡ä¸»çº¿ç¨‹**ï¼šä½¿ç”¨ Web Worker å¤„ç†è€—æ—¶æ“ä½œ
- **ä¾èµ–å¤–éƒ¨ CDN ä¸å£°æ˜**ï¼šä¼šè¢« CSP é˜»æ­¢

### 14.3 æ€§èƒ½ä¼˜åŒ–

```typescript
// 1. ä½¿ç”¨ viteSingleFile å†…è”æ‰€æœ‰èµ„æº
import { viteSingleFile } from 'vite-plugin-singlefile';

// 2. å¯ç”¨ gzip å‹ç¼©
// æœåŠ¡å™¨è¿”å›æ—¶è®¾ç½® Content-Encoding: gzip

// 3. æ‡’åŠ è½½é‡å‹åº“
const loadThreeJs = () => import('three');

// 4. ä½¿ç”¨ requestIdleCallback å¤„ç†éå…³é”®ä»»åŠ¡
requestIdleCallback(() => {
  // é¢„åŠ è½½ã€åˆ†æç­‰éå…³é”®æ“ä½œ
});

// 5. ä½¿ç”¨è™šæ‹Ÿæ»šåŠ¨å¤„ç†é•¿åˆ—è¡¨
// æ¨èï¼šreact-window, vue-virtual-scroller
```

---

## ç¬¬åäº”éƒ¨åˆ†ï¼šMCP App çš„å½±å“ä¸å˜é©

### 15.1 å¯¹ AI ç”Ÿæ€çš„å½±å“

#### æ‰“ç ´"çº¯æ–‡æœ¬å“åº”"çš„èŒƒå¼

ä¼ ç»Ÿçš„ AI Agent åªèƒ½è¿”å›æ–‡æœ¬ã€‚å³ä½¿æœ‰"ä»£ç æ‰§è¡Œ"èƒ½åŠ›ï¼Œæœ€ç»ˆå‘ˆç°ç»™ç”¨æˆ·çš„ä»ç„¶æ˜¯æ–‡æœ¬æˆ–é™æ€å›¾ç‰‡ã€‚

MCP App æ”¹å˜äº†è¿™ä¸€ç‚¹ï¼š

```
Before MCP App:
User: "å¸®æˆ‘ç”Ÿæˆä¸€ä¸ªé¥¼å›¾å±•ç¤ºé”€å”®æ•°æ®"
Agent: "å¥½çš„ï¼Œè¿™æ˜¯æ•°æ®ï¼š{...}ï¼Œæ‚¨å¯ä»¥å¤åˆ¶åˆ° Excel ä¸­ç”Ÿæˆå›¾è¡¨"

After MCP App:
User: "å¸®æˆ‘ç”Ÿæˆä¸€ä¸ªé¥¼å›¾å±•ç¤ºé”€å”®æ•°æ®"
Agent: [ç›´æ¥æ¸²æŸ“äº¤äº’å¼ ECharts é¥¼å›¾ï¼Œæ”¯æŒæ‚¬åœæŸ¥çœ‹è¯¦æƒ…ã€å¯¼å‡ºå›¾ç‰‡]
```

#### æ¨åŠ¨ Agent ç”Ÿæ€æ ‡å‡†åŒ–

MCP App æ˜¯**ç¬¬ä¸€ä¸ªè·¨å…¬å¸ã€è·¨å¹³å°**çš„ AI Agent UI æ ‡å‡†ï¼š

- Anthropicã€OpenAIã€Blockã€Microsoft å…±åŒå‚ä¸
- åŒä¸€ä¸ª MCP App å¯ä»¥åœ¨ Claudeã€ChatGPTã€VS Code ä¸­è¿è¡Œ
- å¼€å‘è€…åªéœ€å†™ä¸€æ¬¡ä»£ç 

è¿™é¿å…äº†ç”Ÿæ€ç¢ç‰‡åŒ–â€”â€”ä¸ä¼šå‡ºç°"Claude ä¸“ç”¨æ’ä»¶"ã€"ChatGPT ä¸“ç”¨ Widget"çš„å±€é¢ã€‚

#### ä¼ä¸šçº§ AI åº”ç”¨åŠ é€Ÿ

æ ¹æ® Forrester 2026 é¢„æµ‹ï¼Œ**30% çš„ä¼ä¸šåº”ç”¨å‚å•†**å°†æ¨å‡ºè‡ªå·±çš„ MCP æœåŠ¡å™¨ã€‚

MCP App è®©ä¼ä¸šèƒ½å¤Ÿï¼š

- å°†å†…éƒ¨ç³»ç»Ÿå°è£…ä¸º MCP Appï¼Œå‘ AI Agent æš´éœ²èƒ½åŠ›
- é¿å…ä¾›åº”å•†é”å®šï¼Œçµæ´»é€‰æ‹© AI å¹³å°
- ç»Ÿä¸€å†…éƒ¨å·¥å…·çš„ AI é›†æˆæ ‡å‡†

### 15.2 å¯¹å¼€å‘è€…çš„å½±å“

#### æ–°çš„æŠ€èƒ½è¦æ±‚

| ä¼ ç»Ÿ MCP å¼€å‘    | MCP App å¼€å‘            |
| ---------------- | ----------------------- |
| åç«¯ä¸ºä¸»         | å‰åç«¯ç»“åˆ              |
| JSON æ•°æ®å¤„ç†    | UI/UX è®¾è®¡              |
| æ— éœ€è€ƒè™‘å®‰å…¨æ²™ç®± | éœ€ç†è§£ CSPã€iframe å®‰å…¨ |
| å•å¹³å°é€‚é…       | è·¨å¹³å°ä¸»é¢˜/å“åº”å¼       |

#### é™ä½åˆ†å‘é—¨æ§›

- **æ— éœ€ç‹¬ç«‹éƒ¨ç½²**ï¼šUI ä½œä¸ºèµ„æºåµŒå…¥ MCP Server
- **æ— éœ€åº”ç”¨å•†åº—å®¡æ ¸**ï¼šé…ç½® MCP æœåŠ¡å™¨å³å¯ä½¿ç”¨
- **å³æ—¶æ›´æ–°**ï¼šä¿®æ”¹ä»£ç å³ç”Ÿæ•ˆï¼Œæ— éœ€ç”¨æˆ·å‡çº§

### 15.3 å¯¹äº§å“äº¤äº’çš„å˜é©

| åœºæ™¯       | ä¼ ç»Ÿä½“éªŒ               | MCP App ä½“éªŒ       |
| ---------- | ---------------------- | ------------------ |
| æ•°æ®å¯è§†åŒ– | è¿”å›æ•°æ®è®©ç”¨æˆ·è‡ªå·±ç”»å›¾ | ç›´æ¥æ¸²æŸ“äº¤äº’å¼å›¾è¡¨ |
| è¡¨å•å¡«å†™   | å¤šè½®å¯¹è¯é€ä¸ªè¯¢é—®å­—æ®µ   | ä¸€æ¬¡æ€§è¡¨å•è¾“å…¥     |
| æ–‡ä»¶é¢„è§ˆ   | è¿”å›ä¸‹è½½é“¾æ¥           | å†…åµŒ PDF/3D æŸ¥çœ‹å™¨ |
| é…ç½®å‘å¯¼   | é€æ­¥æ–‡å­—å¼•å¯¼           | å¯è§†åŒ–æ­¥éª¤æŒ‡ç¤ºå™¨   |
| åœ°å›¾å¯¼èˆª   | è¿”å›åœ°å€æ–‡æœ¬           | åµŒå…¥äº¤äº’å¼åœ°å›¾     |

---

## ç¬¬åå…­éƒ¨åˆ†ï¼šä¸ Google A2UI çš„å¯¹æ¯”

### 16.1 A2UI ç®€ä»‹

**A2UIï¼ˆAgent-to-User Interfaceï¼‰** æ˜¯ Google äº 2025 å¹´ 12 æœˆå‘å¸ƒçš„å¦ä¸€ä¸ª Agent UI åè®®ã€‚

æ ¸å¿ƒç†å¿µï¼š**å£°æ˜å¼ç»„ä»¶æè¿°**ï¼Œè€Œéå¯æ‰§è¡Œä»£ç ã€‚

```
Agent è¾“å‡º A2UI JSON æè¿°
        â†“
Client è¯»å–ç»„ä»¶æè¿°
        â†“
æ˜ å°„åˆ°æœ¬åœ°åŸç”Ÿç»„ä»¶
        â†“
ç”¨æˆ·çœ‹åˆ°åŸç”Ÿé£æ ¼çš„ UI
```

### 16.2 æ ¸å¿ƒå·®å¼‚

| ç»´åº¦           | MCP Apps                   | Google A2UI               |
| -------------- | -------------------------- | ------------------------- |
| **æ ¸å¿ƒç†å¿µ**   | åµŒå…¥å¼ Web åº”ç”¨            | å£°æ˜å¼ç»„ä»¶æè¿°            |
| **UI å®ç°**    | å®Œæ•´ HTML/CSS/JSï¼ˆiframeï¼‰ | JSON ç»„ä»¶å£°æ˜ï¼ˆåŸç”Ÿæ¸²æŸ“ï¼‰ |
| **çµæ´»æ€§**     | é«˜ï¼ˆå¯ç”¨ä»»æ„å‰ç«¯æŠ€æœ¯ï¼‰     | å—é™ï¼ˆåªèƒ½ç”¨é¢„å®šä¹‰ç»„ä»¶ï¼‰  |
| **å®‰å…¨æ¨¡å‹**   | iframe æ²™ç®± + CSP          | ç»„ä»¶ç™½åå•ç›®å½•            |
| **å¼€å‘é—¨æ§›**   | éœ€å‰ç«¯å¼€å‘ç»éªŒ             | LLM å¯ç›´æ¥ç”Ÿæˆ            |
| **æ¸²æŸ“ä¸€è‡´æ€§** | è·¨å¹³å°ä¿æŒä¸€è‡´             | ä¾èµ–å„å¹³å°åŸç”Ÿå®ç°        |

### 16.3 æŠ€æœ¯è·¯çº¿å¯¹æ¯”

**MCP Appsï¼š"Mini Web App"è·¯çº¿**

```typescript
// è¿”å›å®Œæ•´ HTML
registerAppResource(
  server,
  'chart',
  'ui://app/chart.html',
  {
    mimeType: RESOURCE_MIME_TYPE,
  },
  async () => ({
    contents: [
      {
        uri: 'ui://app/chart.html',
        text: `
      <html>
        <script src="echarts.min.js"></script>
        <script>echarts.init(...)</script>
        <div id="chart"></div>
      </html>
    `,
      },
    ],
  })
);
```

**A2UIï¼š"Native-First å£°æ˜å¼"è·¯çº¿**

```json
{
  "components": [
    {
      "id": "chart1",
      "type": "PieChart",
      "props": {
        "data": [{ "label": "A", "value": 30 }],
        "title": "Sales"
      }
    }
  ]
}
```

### 16.4 å¦‚ä½•é€‰æ‹©

| åœºæ™¯                          | æ¨èæ–¹æ¡ˆ           |
| ----------------------------- | ------------------ |
| ç®€å•è¡¨å•ã€åˆ—è¡¨ã€å¡ç‰‡          | A2UIï¼ˆæ›´è½»é‡ï¼‰     |
| å¤æ‚æ•°æ®å¯è§†åŒ–ï¼ˆEChartsã€D3ï¼‰ | MCP Appsï¼ˆæ›´çµæ´»ï¼‰ |
| 3D/åœ°å›¾/å¯Œåª’ä½“                | MCP Appsï¼ˆå¿…éœ€ï¼‰   |
| å¸Œæœ›åŸç”Ÿç³»ç»Ÿä½“éªŒ              | A2UI               |
| éœ€è¦å¤æ‚äº¤äº’é€»è¾‘              | MCP Apps           |
| LLM ç›´æ¥ç”Ÿæˆ UI               | A2UI               |
| å¤ç”¨ç°æœ‰ Web ç»„ä»¶             | MCP Apps           |

### 16.5 å¯èƒ½çš„èåˆæ–¹å‘

ä¸¤è€…å¹¶éå®Œå…¨äº’æ–¥ï¼Œæœªæ¥å¯èƒ½ï¼š

- MCP App å†…éƒ¨ä½¿ç”¨ A2UI æè¿°åŠ¨æ€ç”Ÿæˆçš„ UI ç‰‡æ®µ
- A2UI ç»„ä»¶ç›®å½•æ‰©å±•æ”¯æŒåµŒå…¥ MCP App
- ç»Ÿä¸€çš„ "Agent UI åè®®" æ•´åˆä¸¤ç§æ¨¡å¼

---

## ç¬¬åä¸ƒéƒ¨åˆ†ï¼šæœªæ¥å‘å±•æ–¹å‘

### 17.1 åè®®å±‚é¢

- **æ›´å¤šæ˜¾ç¤ºæ¨¡å¼**ï¼šé™¤ inline/fullscreen/pip å¤–ï¼Œå¯èƒ½å¢åŠ  modalã€sidebar ç­‰
- **å¢å¼ºæƒé™æ§åˆ¶**ï¼šæ›´ç»†ç²’åº¦çš„è®¾å¤‡è®¿é—®ã€ç½‘ç»œè¯·æ±‚æ§åˆ¶
- **ä¸ A2UI çš„èåˆ**ï¼šæ··åˆä½¿ç”¨å£°æ˜å¼ç»„ä»¶å’ŒåµŒå…¥å¼ App

### 17.2 ç”Ÿæ€æ‰©å±•

- **æ›´å¤šå®¢æˆ·ç«¯æ”¯æŒ**ï¼šJetBrainsã€AWS Bedrockã€Google ç­‰
- **ç»„ä»¶æ¨¡æ¿åº“**ï¼šå¸¸ç”¨ UI æ¨¡å¼çš„å¼€ç®±å³ç”¨æ¨¡æ¿
- **å¯è§†åŒ–æ„å»ºå·¥å…·**ï¼šä½ä»£ç /æ— ä»£ç  MCP App æ„å»ºå™¨

### 17.3 æŠ€æœ¯èƒ½åŠ›å¢å¼º

- **å¤š App ååŒ**ï¼šApp é—´çŠ¶æ€å…±äº«å’Œæ¶ˆæ¯ä¼ é€’
- **ç¦»çº¿ä¸æŒä¹…åŒ–**ï¼šService Worker ç¼“å­˜ã€è·¨ä¼šè¯çŠ¶æ€ä¿ç•™
- **æ›´å¤šè®¾å¤‡æƒé™**ï¼šè“ç‰™ã€NFCã€ä¼ æ„Ÿå™¨ç­‰

### 17.4 å‚ç›´é¢†åŸŸæ·±åŒ–

- **åŒ»ç–—å¥åº·**ï¼šDICOM åŒ»å­¦å½±åƒæŸ¥çœ‹å™¨
- **é‡‘èæœåŠ¡**ï¼šå®æ—¶è¡Œæƒ…å›¾è¡¨ã€é£é™©ä»ªè¡¨ç›˜
- **å·¥ç¨‹è®¾è®¡**ï¼šCAD é¢„è§ˆå™¨ã€BIM æ¨¡å‹æŸ¥çœ‹
- **æ•™è‚²åŸ¹è®­**ï¼šäº¤äº’å¼è¯¾ä»¶ã€ç¼–ç¨‹ç»ƒä¹ ç¯å¢ƒ

---

## ç»“è®º

MCP App æ˜¯ MCP åè®®çš„**å†å²æ€§æ‰©å±•**ï¼Œæ ‡å¿—ç€ AI Agent ç”Ÿæ€ä»"å·¥å…·è°ƒç”¨"å‡çº§ä¸º"åº”ç”¨å¹³å°"ã€‚

**å…³é”®è¦ç‚¹å›é¡¾**ï¼š

1. **MCP App = Tool + UI Resource**ï¼Œé€šè¿‡ `_meta.ui.resourceUri` å…³è”
2. **ä¸‰å±‚æ¶æ„**ï¼šServer â†’ Host â†’ Viewï¼Œé€šè¿‡ JSON-RPC é€šä¿¡
3. **å¤šå±‚å®‰å…¨**ï¼šiframe æ²™ç®± + CSP + æƒé™å£°æ˜ + ç”¨æˆ·åŒæ„
4. **è·¨å¹³å°æ”¯æŒ**ï¼šClaudeã€ChatGPTã€VS Codeã€Goose ç­‰
5. **ç”Ÿæ€æ„ä¹‰**ï¼šæ‰“ç ´çº¯æ–‡æœ¬èŒƒå¼ï¼Œæ¨åŠ¨ Agent UI æ ‡å‡†åŒ–

å¦‚æœä½ æ­£åœ¨å¼€å‘ MCP æœåŠ¡å™¨ï¼Œæ˜¯æ—¶å€™è€ƒè™‘ä¸ºä½ çš„å·¥å…·æ·»åŠ äº¤äº’å¼ UI äº†ã€‚MCP App è®© AI Agent çœŸæ­£æˆä¸ºä¸€ä¸ª**å¯è§†åŒ–çš„åº”ç”¨å¹³å°**ï¼Œè€Œä¸ä»…ä»…æ˜¯ä¸€ä¸ªå¯¹è¯æ¡†ã€‚

---

## å‚è€ƒèµ„æ–™

### å®˜æ–¹èµ„æº

- [ext-apps å®˜æ–¹ä»“åº“](https://github.com/modelcontextprotocol/ext-apps)
- [MCP Apps å®˜æ–¹æ–‡æ¡£](https://modelcontextprotocol.io/docs/extensions/apps)
- [API æ–‡æ¡£](https://modelcontextprotocol.github.io/ext-apps/api/)
- [è§„èŒƒæ–‡æ¡£ (2026-01-26)](https://github.com/modelcontextprotocol/ext-apps/blob/main/specification/2026-01-26/apps.mdx)

### åšå®¢æ–‡ç« 

- [MCP Apps 1.0 å‘å¸ƒå…¬å‘Š (2026-01-26)](https://blog.modelcontextprotocol.io/posts/2026-01-26-mcp-apps/)
- [MCP Apps é¢„è§ˆç‰ˆå…¬å‘Š (2025-11-21)](https://blog.modelcontextprotocol.io/posts/2025-11-21-mcp-apps/)

### ç›¸å…³é¡¹ç›®

- [MCP-UI ç¤¾åŒºé¡¹ç›®](https://github.com/MCP-UI-Org/mcp-ui)
- [OpenAI Apps SDK](https://developers.openai.com/apps-sdk/)
- [Google A2UI](https://a2ui.org/)

### ç¤¾åŒºè®¨è®º

- [SEP-1865 PR](https://github.com/modelcontextprotocol/modelcontextprotocol/pull/1865)
- [Working Group Issue #35](https://github.com/modelcontextprotocol-community/working-groups/issues/35)
